!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=44)}([function(t,e,r){(function(n){function s(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(s=n))}),e.splice(s,0,r)}function o(...t){return"object"==typeof console&&console.log&&console.log(...t)}function a(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}}function u(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}function c(){try{return localStorage}catch(t){}}e.log=o,e.formatArgs=i,e.save=a,e.load=u,e.useColors=s,e.storage=c(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=r(50)(e);const{formatters:l}=t.exports;l.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,r(3))},function(t,e,r){"use strict";var n=r(45),s=r(46);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=E,e.resolveObject=S,e.format=T,e.Url=i;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["<",">",'"',"`"," ","\r","\n","\t"],l=["{","}","|","\\","^","`"].concat(c),h=["'"].concat(l),f=["%","/","?",";","#"].concat(h),p=["/","?","#"],d=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(47);function _(t,e,r){if(t&&s.isObject(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function T(t){return s.isString(t)&&(t=_(t)),t instanceof i?t.format():i.prototype.format.call(t)}function E(t,e){return _(t,!1,!0).resolve(e)}function S(t,e){return t?_(t,!1,!0).resolveObject(e):e}i.prototype.parse=function(t,e,r){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(a),l=/\\/g;c[0]=c[0].replace(l,"/"),t=c.join(a);var d=t;if(d=d.trim(),!r&&1===t.split("#").length){var _=u.exec(d);if(_)return this.path=d,this.href=d,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var T=o.exec(d);if(T){T=T[0];var E=T.toLowerCase();this.protocol=E,d=d.substr(T.length)}if(r||T||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===d.substr(0,2);!S||T&&m[T]||(d=d.substr(2),this.slashes=!0)}if(!m[T]&&(S||T&&!b[T])){for(var A=-1,R=0,C,x;R<p.length;R++){var O=d.indexOf(p[R]);-1!==O&&(-1===A||O<A)&&(A=O)}x=-1===A?d.lastIndexOf("@"):d.lastIndexOf("@",A),-1!==x&&(C=d.slice(0,x),d=d.slice(x+1),this.auth=decodeURIComponent(C)),A=-1;for(var R=0;R<f.length;R++){var O=d.indexOf(f[R]);-1!==O&&(-1===A||O<A)&&(A=O)}-1===A&&(A=d.length),this.host=d.slice(0,A),d=d.slice(A),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var F=this.hostname.split(/\./),R=0,P=F.length;R<P;R++){var j=F[R];if(j&&!j.match(g)){for(var N="",U=0,I=j.length;U<I;U++)j.charCodeAt(U)>127?N+="x":N+=j[U];if(!N.match(g)){var L=F.slice(0,R),M=F.slice(R+1),D=j.match(y);D&&(L.push(D[1]),M.unshift(D[2])),M.length&&(d="/"+M.join(".")+d),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!w[E])for(var R=0,P=h.length;R<P;R++){var H=h[R];if(-1!==d.indexOf(H)){var $=encodeURIComponent(H);$===H&&($=escape(H)),d=d.split(H).join($)}}var W=d.indexOf("#");-1!==W&&(this.hash=d.substr(W),d=d.slice(0,W));var G=d.indexOf("?");if(-1!==G?(this.search=d.substr(G),this.query=d.substr(G+1),e&&(this.query=v.parse(this.query)),d=d.slice(0,G)):e&&(this.search="",this.query={}),d&&(this.pathname=d),b[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",Y=this.search||"";this.path=B+Y}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},i.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(s.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=t[l])}return b[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!b[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",y=r.search||"";r.path=g+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var w=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=v||w||r.host&&t.pathname,T=_,E=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],S=r.protocol&&!b[r.protocol];if(S&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===E[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),r.search=t.search,r.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(S){r.hostname=r.host=E.shift();var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=t.search,r.query=t.query,s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var R=E.slice(-1)[0],C=(r.host||t.host||E.length>1)&&("."===R||".."===R)||""===R,x=0,O=E.length;O>=0;O--)R=E[O],"."===R?E.splice(O,1):".."===R?(E.splice(O,1),x++):x&&(E.splice(O,1),x--);if(!_&&!T)for(;x--;x)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var k=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(S){r.hostname=r.host=k?"":E.length?E.shift():"";var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return _=_||r.host&&E.length,_&&!k&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){errors={};class r extends Error{constructor(t){super(t||"Coding Error"),this.name="CodingError"}}errors.CodingError=r;class n extends Error{constructor(t){super("To be implemented: "+t),this.name="ToBeImplementedError"}}errors.ToBeImplementedError=n;class s extends Error{constructor(t){super(t||"Transport failure"),this.name="TransportError"}}errors.TransportError=s;class i extends Error{constructor(t){super(t||"Timed out"),this.name="TimeoutError"}}errors.TimeoutError=i;class o extends Error{constructor(t){super(t||"Intentionally Unimplemented Function"),this.name="IntentionallyUnimplementedError"}}errors.IntentionallyUnimplementedError=o,e=t.exports=errors},function(t,e){var r=t.exports={},n,s;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{return s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(t){s=o}}();var c=[],l=!1,h,f=-1;function p(){l&&h&&(l=!1,h.length?c=h.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=a(p);l=!0;for(var e=c.length;e;){for(h=c,c=[];++f<e;)h&&h[f].run();f=-1,e=c.length}h=null,l=!1,u(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new g(t,e)),1!==c.length||l||a(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,r){const n=r(1),s=r(2),i=r(13),o=r(0)("dweb-transports"),a=r(14),u=r(65),c=r(91),{p_namingcb:l,naming:h,archiveOrgMirroredUrls:f}=r(94);class p{constructor(t){}static _connected(){return this._transports.filter(t=>!t.status)}static p_connectedNames(t){const e=this._connected().map(t=>t.name);if(!t)return new Promise((t,r)=>t(e));t(null,e)}static async p_connectedNamesParm(){return(await this.p_connectedNames()).map(t=>"transport="+t).join("&")}static statuses({connected:t}={}){const e=p._transports.map(t=>({name:t.name,status:t.status,info:t.info}));return t?e.filter(t=>!t.status):e}static p_statuses(t){const e=this.statuses({connected:!1});if(!t)return new Promise((t,r)=>t(e));t(null,e)}static validFor(t,e,r){return"string"==typeof t&&(t=[t]),t&&t[0]||["store","newlisturls","newdatabase","newtable","seed"].includes(e)?t&&t.length>0?[].concat(...t.map(t=>"string"==typeof t?n.parse(t):t).map(t=>this._transports.filter(n=>n.validFor(t,e,r)).map(e=>[t,e]))):this._transports.filter(t=>t.validFor(void 0,e,r)).map(t=>[void 0,t]):(console.error("Transports.validFor called with invalid arguments: urls=",t,"func=",e),[])}static async p_urlsValidFor(t,e,r){return this.validFor(t,e,r).map(t=>t[0])}static http(){return p._connected().find(t=>"HTTP"===t.name)}static wolk(){return p._connected().find(t=>"WOLK"===t.name)}static ipfs(){return p._connected().find(t=>"IPFS"===t.name)}static webtorrent(){return p._connected().find(t=>"WEBTORRENT"===t.name)}static gun(){return p._connected().find(t=>"GUN"===t.name)}static fluence(){return p._connected().find(t=>"FLUENCE"===t.name)}static _resolvedUrlToGatewayUrl(t){const e=f.find(e=>t.startsWith(e));return e?this.mirror+t.slice(e.length):t}static async p_resolveNames(t){if(this.mirror){const e=(Array.isArray(t)?t:[t]).map(t=>this._resolvedUrlToGatewayUrl(t)),r=e.find(t=>t.startsWith(this.mirror));return r?[r]:e}return this.namingcb?await this.namingcb(t):t}static resolveNames(t){if(this.mirror){const e=(Array.isArray(t)?t:[t]).map(t=>this._resolvedUrlToGatewayUrl(t)),r=e.find(t=>t.startsWith(this.mirror));return r?[r]:e}return this.naming(t)}static resolveNamesWith(t){this.namingcb=t}static togglePaused(t,e){const r=this._transports.find(e=>e.name===t);r?r.togglePaused(t=>e(null,t.status)):e(void 0)}static async _p_rawstore(t,e){let r=[],n=await Promise.all(t.map(async function(t){try{o("Storing %d bytes to %s",e.length,t.name);let n=await t.p_rawstore(e);return o("Storing %d bytes to %s succeeded: %s",e.length,t.name,n),n}catch(n){return o("Storing %d bytes to %s failed: %s",e.length,t.name,n.message),void r.push(n)}}));if(n=n.filter(t=>!!t),!n.length)throw o("Storing %d bytes failed on all transports",e.length),new s.TransportError(r.map(t=>t.message).join(", "));return n}static async p_rawstore(t){let e=this.validFor(void 0,"store").map(([t,e])=>e);if(!e.length)throw o("Storing %d bytes failed: no transports available",t.length),new s.TransportError("Transports.p_rawstore: Cant find transport for store");return this._p_rawstore(e,t)}static async p_rawfetch(t,e={}){if(!t.length)throw new s.TransportError("Transports.p_rawfetch given an empty list of urls");let r=this.resolveNames(t);if(!r.length)throw new s.TransportError("Transports.p_rawfetch none of the urls resolved: "+t);let n=this.validFor(r,"fetch",{noCache:e.noCache});if(!n.length)throw new s.TransportError("Transports.p_rawfetch cant find any transport for urls: "+r);let i=[],a=[];for(const[t,r]of n)try{o("Fetching %s via %s",t.href,r.name);let n=await r.p_rawfetch(t,Object.assign({},e,{silentFinalError:!0}));return o("Fetching %s via %s succeeded %d bytes",t.href,r.name,n.length),e.relay&&a.length&&(o("Fetching attempting relay of %d bytes from %s to %o",n.length,t.href,a.map(t=>t.name)),this._p_rawstore(a,n).then(t=>o("Fetching relayed %d bytes to %o",n.length,t))),n}catch(e){a.push(r),i.push(e),o("Fetching %s via %s failed: %s",t.href,r.name,e.message)}throw e.silentFinalError||o("Fetching %o failed on all transports",t),new s.TransportError(i.map(t=>t.message).join(", "))}static fetch(t,e={},r){"function"==typeof e&&(r=e,e={});const n=this.p_rawfetch(t,e);if(!r)return n;n.then(t=>{try{r(null,t)}catch(t){o("Uncaught error in fetch %O",t)}}).catch(t=>r(t))}static seed({directoryPath:t,fileRelativePath:e,ipfsHash:r,urlToFile:n,torrentRelativePath:s},i){if(!i)return new Promise((t,e)=>{try{a.call(this,(r,n)=>{r?e(r):t(n)})}catch(t){e(t)}});try{a.call(this,i)}catch(t){i(t)}function a(i){let a=this.validFor(void 0,"seed").map(([t,e])=>e);if(a.length){const o={};u(a,(i,a)=>i.seed({directoryPath:t,torrentRelativePath:s,fileRelativePath:e,ipfsHash:r,urlToFile:n},(t,e)=>{o[i.name]=t?{err:t.message}:e,a(null)}),t=>i(null,o))}else o("Seeding: no transports available"),i(null,null)}}static async p_rawlist(t){t=await this.p_resolveNames(t);let e=this.validFor(t,"list");if(!e.length)throw new s.TransportError('Transports.p_rawlist: Cant find transport to "list" urls:'+t.join(","));let r=[],n=await Promise.all(e.map(async function([t,e]){try{o("Listing %s via %s",t,e.name);let n=await e.p_rawlist(t);return o("Listing %s via %s retrieved %d items",t,e.name,n.length),n}catch(n){return o("Listing %s via %s failed: %s",t,e.name,n.message),r.push(n),[]}}));if(r.length>=e.length)throw o("Listing %o failed on all transports",t),new s.TransportError(r.map(t=>t.message).join(", "));let i={};return[].concat(...n).filter(t=>!i[t.signature]&&(i[t.signature]=!0))}static async p_rawadd(t,e){t=await this.p_resolveNames(t);let r=this.validFor(t,"add");if(!r.length)throw o("Adding to %o failed: no transports available",t),new s.TransportError("Transports.p_rawstore: Cant find transport for urls:"+t.join(","));let n=[];if(await Promise.all(r.map(async function([t,r]){try{return o("Adding to %s via %s",t,r.name),await r.p_rawadd(t,e),void o("Adding to %s via %s succeeded",t,r.name)}catch(e){return o("Adding to %s via %s failed: %s",t,r.name,e.message),void n.push(e)}})),n.length>=r.length)throw o("Adding to %o failed on all transports",t),new s.TransportError(n.map(t=>t.message).join(", "))}static listmonitor(t,e,r={}){this.validFor(t,"listmonitor").map(([t,n])=>{n.listmonitor(t,e,r),o("Monitoring list %s via %s",t,n.name)})}static async p_newlisturls(t){let e=await Promise.all(this.validFor(void 0,"newlisturls").map(([e,r])=>r.p_newlisturls(t)));return[e.map(t=>t[0]),e.map(t=>t[1])]}static async p_f_createReadStream(t,{wanturl:e=!1,preferredTransports:r=[]}={}){let n=this.validFor(t,"createReadStream",{});if(!n.length)throw o("Opening stream from %o failed: no transports available",t),new s.TransportError("Transports.p_createReadStream cant find any transport for urls: "+t);let i=[];n.sort((t,e)=>(r.indexOf(t[1].name)+1||999+Math.random())-(r.indexOf(e[1].name)+1||999+Math.random()));for(const[t,r]of n)try{o("Opening stream from %s via %s",t.href,r.name);let n=await r.p_f_createReadStream(t,{wanturl:e});return["IPFS","HTTP"].includes(r.name)||o("Opening stream from %s via %s succeeded",t.href,r.name),n}catch(e){i.push(e),o("Opening stream from %s via %s failed: %s",t.href,r.name,e.message)}throw o("Opening stream from %o failed on all transports",t),new s.TransportError(i.map(t=>t.message).join(", "))}static createReadStream(t,e,r){"function"==typeof e&&(r=e,e={start:0}),DwebTransports.p_f_createReadStream(t,{preferredTransports:e.preferredTransports||[]}).then(t=>{let n=t(e);if(!r)return n;r(null,n)}).catch(t=>{t instanceof s.TransportError?console.warn("Transports.createReadStream caught",t.message):console.error("Transports.createReadStream caught",t),r?r(t):reject(t)})}static async p_get(t,e){let r=this.validFor(t,"get"),n=Array.isArray(e)?`${e.length} keys`:e;if(!r.length)throw o("Getting %s from %o failed: no transports available",n,t),new s.TransportError("Transports.p_get cant find any transport to get keys from urls: "+t);let i=[];for(const[t,s]of r)try{o("Getting %s from %s via %s",n,t.href,s.name);let r=await s.p_get(t,e);return o("Getting %s from %s via %s succeeded length=%d",n,t.href,s.name,r.length),r}catch(e){i.push(e),o("Getting %s from %s via %s failed: %s",n,t.href,s.name,e.message)}throw o("Getting %s from %o failed on all transports",n,t),new s.TransportError(i.map(t=>t.message).join(", "))}static async p_set(t,e,r){t=await this.p_resolveNames(t);let n="object"==typeof e?`${e.length} keys`:e,i=this.validFor(t,"set");if(!i.length)throw o("Setting %s on %o failed: no transports available",n,t),new s.TransportError("Transports.p_set cant find any transport for urls: "+t);let a=[],u=!1;if(await Promise.all(i.map(async function([t,s]){try{o("Setting %s on %s via %s",n,t.href,s.name),await s.p_set(t,e,r),o("Setting %s on %s via %s succeeded",n,t.href,s.name),u=!0}catch(e){o("Setting %s on %s via %s failed: %s",n,t.href,s.name,e.message),a.push(e)}})),!u)throw o("Setting %s on %o failed on all transports",n,t),new s.TransportError(a.map(t=>t.message).join(", "))}static async p_delete(t,e){t=await this.p_resolveNames(t);let r=Array.isArray(e)?`${e.length} keys`:e,n=this.validFor(t,"set");if(!n.length)throw o("Deleting %s on %o failed: no transports available",r,t),new s.TransportError("Transports.p_set cant find any transport for urls: "+t);let i=[],a=!1;if(await Promise.all(n.map(async function([t,n]){try{o("Deleting %s on %s via %s",r,t.href,n.name),await n.p_delete(t,e),o("Deleting %s on %s via %s succeeded",r,t.href,n.name),a=!0}catch(e){o("Deleting %s on %s via %s failed: %s",r,t.href,n.name,e.message),i.push(e)}})),!a)throw o("Deleting %s on %o failed on all transports",r,t),new s.TransportError(i.map(t=>t.message).join(", "))}static async p_keys(t){t=await this.p_resolveNames(t);let e=this.validFor(t,"keys");if(!e.length)throw o("Getting all keys on %o failed: no transports available",t),new s.TransportError("Transports.p_keys cant find any transport for urls: "+t);let r=[];for(const[t,n]of e)try{o("Getting all keys on %s via %s",t.href,n.name);let e=await n.p_keys(t);return o("Getting all keys on %s via %s succeeded with %d keys",t.href,n.name,e.length),e}catch(e){r.push(e),o("Getting all keys on %s via %s failed: %s",t.href,n.name,e.message)}throw o("Getting all keys on %o failed on all transports",t),new s.TransportError(r.map(t=>t.message).join(", "))}static async p_getall(t){t=await this.p_resolveNames(t);let e=this.validFor(t,"getall");if(!e.length)throw o("Getting all values on %o failed: no transports available",t),new s.TransportError("Transports.p_getall cant find any transport for urls: "+t);let r=[];for(const[t,n]of e)try{o("Getting all values on %s via %s",t.href,n.name);let e=await n.p_getall(t);return o("Getting all values on %s via %s succeeded with %d values",t.href,n.name,e.length),e}catch(e){r.push(e),o("Getting all values on %s via %s failed: %s",t.href,n.name,e.message)}throw o("Getting all keys on %o failed on all transports",t),new s.TransportError(r.map(t=>t.message).join(", "))}static async p_newdatabase(t){let e=await Promise.all(this.validFor(void 0,"newdatabase").map(([e,r])=>r.p_newdatabase(t)));return{privateurls:e.map(t=>t.privateurl),publicurls:e.map(t=>t.publicurl)}}static async p_newtable(t,e){let r=await Promise.all(this.validFor(void 0,"newtable").map(([r,n])=>n.p_newtable(t,e)));return{privateurls:r.map(t=>t.privateurl),publicurls:r.map(t=>t.publicurl)}}static async p_connection(t){t=await this.p_resolveNames(t),await Promise.all(this.validFor(t,"connection").map(([t,e])=>e.p_connection(t)))}static monitor(t,e,{current:r=!1}={}){this.validFor(t,"monitor").map(([t,n])=>{o("Monitoring table %s via %s",t,n.name),n.monitor(t,e,{current:r})})}static addtransport(t){p._transports.push(t)}static setup0(t,e,r){let n={http:{urlbase:"http://localhost:4244"}};return t.map(t=>{let r=this._transportclasses["LOCAL"===t?"HTTP":t];return r?(o("Setting up connection to %s with options %o",t,e),r.setup0("LOCAL"===t?n:e)):void o("Connection to %s unavailable",t)}).filter(t=>!!t)}static p_setup1(t,e){const r=Promise.all(this._transports.filter(t=>!this._optionspaused.includes(t.name)).map(e=>(o("Connection stage 1 to %s",e.name),e.p_setup1(t))));if(!e)return r;r.catch(t=>e(t)).then(t=>e(null,t))}static p_setup2(t,e){const r=Promise.all(this._transports.filter(t=>!this._optionspaused.includes(t.name)).map(e=>(o("Connection stage 2 to %s",e.name),e.p_setup2(t))));if(!e)return r;r.catch(t=>e(t)).then(t=>e(null,t))}static p_stop(t,e){if(!e)return new Promise((t,e)=>{try{r.call(this,(r,n)=>{r?e(r):t(n)})}catch(t){e(t)}});try{r.call(this,e)}catch(t){e(t)}function r(e){c(this._connected(),(e,r)=>{o("Stopping %s",e.name),e.stop(t,r)},e)}}static async refreshstatus(t){let e=["transportstatus0","transportstatus1","transportstatus2","transportstatus3","transportstatus4"],r=t.statuselement;r&&(r.classList.remove(...e),r.classList.add(e[t.status])),p.statuscb&&p.statuscb(t)}static _tabbrevs(t){let e=t.transports;return e&&e.length||(e=t.defaulttransports||[]),e.length||(e=["HTTP","IPFS","WEBTORRENT","HASH"]),e=e.map(t=>t.toUpperCase()),e}static loadIntoHtmlPage(t){const e="https://cdn.jsdelivr.net/npm";this._tabbrevs(t).forEach(t=>{this._transportclasses[t].scripts.map(r=>{o("Loading %s %s",t,r),document.write('<script src="'+(r.startsWith("http")?r:[e,r].join("/"))+'"><\/script>')})})}static loadIntoNode(t){this._tabbrevs(t).forEach(t=>{this._transportclasses[t].loadIntoNode()})}static connect(t,e){const r=this.p_connect(t);if(!e)return r;r.catch(t=>e(t)).then(t=>e(null,t))}static async p_connect(t){try{t=t||{},this._optionspaused=(t.paused||[]).map(t=>t.toUpperCase());let e=this.setup0(this._tabbrevs(t),t);if(["statuscb","mirror"].forEach(e=>{t[e]&&(this[e]=t[e])}),t.statuselement){let r=t.statuselement;for(;r.lastChild;)r.removeChild(r.lastChild);r.appendChild(i.createElement("UL",{},e.map(t=>{let e=i.createElement("LI",{onclick:"this.source.togglePaused(DwebTransports.refreshstatus);",source:t,name:t.name},t.name);return t.statuselement=e,e})))}await this.p_setup1(this.refreshstatus),await this.p_setup2(this.refreshstatus),o("Connection completed to %o",this._connected().map(t=>t.name))}catch(t){throw console.error("ERROR in p_connect:",t.message),t}}static async p_urlsFrom(t){if("string"==typeof t&&(t="["===t[0]?JSON.parse(t):t.includes(",")?t.split(","):[t]),!Array.isArray(t))throw new Error(`Unparsable url: ${t}`);return t}static httpFetchUrl(t){return t.find(t=>t.startsWith("http"))}}p._transports=[],p.naming=h,p.namingcb=l,p._transportclasses={},p.httptools=a,e=t.exports=p},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(e,r,n){(function(i){const o=n(1),a=n(2);function u(t,e){return new Promise(r=>{setTimeout(()=>{r(e)},t)})}class c{constructor(t){}static loadIntoNode(){const e=this.requires;if(Array.isArray(e))e.map(e=>{debug("Requiring %s %s",t,s),n(16)(e)});else if("object"==typeof e)Object.entries(e).map(e=>{debug("Requiring %s %s",t,s),i[e[0]]=n(16)(e[1])});else if("string"==typeof e)return n(16)(e)}static setup0(t){throw new a.IntentionallyUnimplementedError("Intentionally undefined function Transport.setup0 should have been subclassed")}p_setup1(t){return this}p_setup2(t){return this}static async p_setup(t,e){let r=await this.setup0(t).p_setup1(e);return r.p_setup2(e)}stop(t,e){this.status=c.STATUS_FAILED,t&&t(this),e(null,this)}togglePaused(t){switch(this.status){case c.STATUS_CONNECTED:this.status=c.STATUS_PAUSED;break;case c.STATUS_PAUSED:this.status=c.STATUS_CONNECTED;break;case c.STATUS_LOADED:this.p_setup1(t).then(e=>e.p_setup2(t))}t&&t(this)}async p_status(){return this.status}connected(){return!this.status}supports(t,e,{noCache:r}={}){if("string"==typeof t&&(t=o.parse(t)),t&&!t.protocol)throw new Error("URL failed to specific a scheme (before :) "+t.href);return(!t||this.supportURLs.includes(t.protocol.slice(0,-1)))&&(!e||this.supportFunctions.includes(e))&&(!r||this.supportFeatures.includes("noCache"))}validFor(t,e,r){return this.connected()&&this.supports(t,e,r)}p_rawstore(t,e){throw new a.ToBeImplementedError("Intentionally undefined function Transport.p_rawstore should have been subclassed")}async p_rawstoreCaught(t){try{return await this.p_rawstore(t)}catch(t){}}p_store(){throw new a.ToBeImplementedError("Undefined function Transport.p_store - may define higher level semantics here (see Python)")}p_rawfetch(t,{timeoutMS:e,start:r,end:n,relay:s=!1}={}){return console.assert(!1,"Intentionally undefined  function Transport.p_rawfetch should have been subclassed"),"UNIMPLEMENTED"}p_fetch(){throw new a.ToBeImplementedError("Undefined function Transport.p_fetch - may define higher level semantics here (see Python)")}p_rawadd(t,e){throw new a.ToBeImplementedError("Undefined function Transport.p_rawadd")}p_rawlist(t){throw new a.ToBeImplementedError("Undefined function Transport.p_rawlist")}p_list(){throw new Error("Undefined function Transport.p_list")}p_newlisturls(t){throw new Error("undefined function Transport.p_newlisturls")}p_rawreverse(t){throw new a.ToBeImplementedError("Undefined function Transport.p_rawreverse")}listmonitor(t,e,{current:r=!1}={}){console.log("Undefined function Transport.listmonitor")}async p_newdatabase(t){throw new a.ToBeImplementedError("Undefined function Transport.p_newdatabase")}async p_newtable(t,e){throw new a.ToBeImplementedError("Undefined function Transport.p_newtable")}async p_set(t,e,r){throw new a.ToBeImplementedError("Undefined function Transport.p_set")}async p_get(t,e){throw new a.ToBeImplementedError("Undefined function Transport.p_get")}async p_delete(t,e){throw new a.ToBeImplementedError("Undefined function Transport.p_delete")}async p_keys(t){throw new a.ToBeImplementedError("Undefined function Transport.p_keys")}async p_getall(t){throw new a.ToBeImplementedError("Undefined function Transport.p_keys")}static async p_f_createReadStream(t,{wanturl:e=!1}){}static mergeoptions(t){let e={};for(let r=0;r<arguments.length;r++){let n=arguments[r];for(let r in n){let s=n[r];null!==s&&("object"==typeof s&&!Array.isArray(s)&&e[r]?e[r]=c.mergeoptions(t[r],n[r]):e[r]=n[r])}}return e}async p_test_list({urlexpectedsubstring:t}={}){console.log(this.name,"p_test_kvt");try{let e=await this.p_newlisturls("NACL VERIFY:1234567LIST"),r=e.publicurl;console.log("newlisturls=",r),console.assert(!t||r.includes(t)),await this.p_rawadd(r,"testvalue");let n=await this.p_rawlist(r);console.assert(1===n.length&&"testvalue"===n[0]),await this.p_rawadd(r,{foo:"bar"}),n=await this.p_rawlist(r),console.assert(2===n.length&&"bar"===n[1].foo),await this.p_rawadd(r,[1,2,3]),n=await this.p_rawlist(r),console.assert(2===n.length&&3===n[2].length&&2===n[2][1]),await u(200),console.log(this.name,"p_test_list complete")}catch(t){throw console.log("Exception thrown in ",this.name,"p_test_list:",t.message),t}}async p_test_kvt(t){console.log(this.name,"p_test_kvt");try{let e=await this.p_newtable("NACL VERIFY:1234567KVT","mytable"),r=e.publicurl;console.log("newtable=",r),console.assert(r.includes(t)),await this.p_set(r,"testkey","testvalue");let n=await this.p_get(r,"testkey");console.assert("testvalue"===n),await this.p_set(r,"testkey2",{foo:"bar"}),n=await this.p_get(r,"testkey2"),console.assert("bar"===n.foo),await this.p_set(r,"testkey3",[1,2,3]),n=await this.p_get(r,"testkey3"),console.assert(2===n[1]),n=await this.p_keys(r),console.assert(n.includes("testkey")&&n.includes("testkey3")&&3===n.length),await this.p_delete(r,["testkey"]),n=await this.p_getall(r),console.log("getall=>",n),console.assert("bar"===n.testkey2.foo&&2===n.testkey3[1]&&!n.testkey),await u(200),console.log(this.name,"p_test_kvt complete")}catch(t){throw console.log("Exception thrown in ",this.name,"p_test_kvt:",t.message),t}}}c.STATUS_CONNECTED=0,c.STATUS_FAILED=1,c.STATUS_STARTING=2,c.STATUS_LOADED=3,c.STATUS_PAUSED=4,c.STATUSTEXT=["Connected","Failed","Starting","Loaded","Paused"],r=e.exports=c}).call(this,n(5))},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(52),s=r(53),i=r(54);function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?y(t,e,r,n):"string"==typeof e?d(t,e,r):w(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,r,n){return h(e),e<=0?u(t,e):void 0!==r?"string"==typeof n?u(t,e).fill(r,n):u(t,e).fill(r):u(t,e)}function p(t,e){if(h(e),t=u(t,e<0?0:0|m(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(e,r);t=u(t,n);var s=t.write(e,r);return s!==n&&(t=t.slice(0,s)),t}function g(t,e){var r=e.length<0?0:0|m(e.length);t=u(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function y(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=g(t,e),t}function w(t,e){if(c.isBuffer(e)){var r=0|m(e.length);return t=u(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||et(e.length)?u(t,0):g(t,e);if("Buffer"===e.type&&i(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),c.alloc(+t)}function v(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Z(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function _(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,r);case"utf8":case"utf-8":return P(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return F(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function T(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function E(t,e,r,n,s){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:S(t,e,r,n,s);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):S(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function S(t,e,r,n,s){var i=1,o=t.length,a=e.length,u;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function c(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(s){var l=-1;for(u=r;u<o;u++)if(c(t,u)===c(e,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===a)return l*i}else-1!==l&&(u-=u-l),l=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){for(var h=!0,f=0;f<a;f++)if(c(t,u+f)!==c(e,f)){h=!1;break}if(h)return u}return-1}function A(t,e,r,n){r=Number(r)||0;var s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function R(t,e,r,n){return tt(J(e,t.length-r),t,r,n)}function C(t,e,r,n){return tt(X(e),t,r,n)}function x(t,e,r,n){return C(t,e,r,n)}function O(t,e,r,n){return tt(Z(e),t,r,n)}function k(t,e,r,n){return tt(Q(e,t.length-r),t,r,n)}function F(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function P(t,e,r){r=Math.min(t.length,r);for(var n=[],s=e;s<r;){var i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1,u,c,l,h;if(s+a<=r)switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],128==(192&u)&&(h=(31&i)<<6|63&u,h>127&&(o=h));break;case 3:u=t[s+1],c=t[s+2],128==(192&u)&&128==(192&c)&&(h=(15&i)<<12|(63&u)<<6|63&c,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(h=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l,h>65535&&h<1114112&&(o=h))}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),s+=a}return N(n)}e.Buffer=c,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return l(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return f(null,t,e,r)},c.allocUnsafe=function(t){return p(null,t)},c.allocUnsafeSlow=function(t){return p(null,t)},c.isBuffer=function t(e){return!(null==e||!e._isBuffer)},c.compare=function t(e,r){if(!c.isBuffer(e)||!c.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,s=r.length,i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0},c.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function t(e,r){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var s=c.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(s,o),o+=a.length}return s},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)T(this,r,r+1);return this},c.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)T(this,r,r+3),T(this,r+1,r+2);return this},c.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)T(this,r,r+7),T(this,r+1,r+6),T(this,r+2,r+5),T(this,r+3,r+4);return this},c.prototype.toString=function t(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):_.apply(this,arguments)},c.prototype.equals=function t(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function t(){var r="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">"},c.prototype.compare=function t(e,r,n,s,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===s&&(s=0),void 0===i&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;for(var o=i-s,a=n-r,u=Math.min(o,a),l=this.slice(s,i),h=e.slice(r,n),f=0;f<u;++f)if(l[f]!==h[f]){o=l[f],a=h[f];break}return o<a?-1:a<o?1:0},c.prototype.includes=function t(e,r,n){return-1!==this.indexOf(e,r,n)},c.prototype.indexOf=function t(e,r,n){return E(this,e,r,n,!0)},c.prototype.lastIndexOf=function t(e,r,n){return E(this,e,r,n,!1)},c.prototype.write=function t(e,r,n,s){if(void 0===r)s="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)s=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(n)?(n|=0,void 0===s&&(s="utf8")):(s=n,n=void 0)}var i=this.length-r;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o=!1;;)switch(s){case"hex":return A(this,e,r,n);case"utf8":case"utf-8":return R(this,e,r,n);case"ascii":return C(this,e,r,n);case"latin1":case"binary":return x(this,e,r,n);case"base64":return O(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}},c.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function N(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=j));return r}function U(t,e,r){var n="";r=Math.min(t.length,r);for(var s=e;s<r;++s)n+=String.fromCharCode(127&t[s]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=e;i<r;++i)s+=V(t[i]);return s}function M(t,e,r){for(var n=t.slice(e,r),s="",i=0;i<n.length;i+=2)s+=String.fromCharCode(n[i]+256*n[i+1]);return s}function D(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,s,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function q(t,e,r,n){e<0&&(e=65535+e+1);for(var s=0,i=Math.min(t.length-r,2);s<i;++s)t[r+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function H(t,e,r,n){e<0&&(e=4294967295+e+1);for(var s=0,i=Math.min(t.length-r,4);s<i;++s)t[r+s]=e>>>8*(n?s:3-s)&255}function $(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function W(t,e,r,n,i){return i||$(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),s.write(t,e,r,n,23,4),r+4}function G(t,e,r,n,i){return i||$(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),s.write(t,e,r,n,52,8),r+8}c.prototype.slice=function t(e,r){var n=this.length,s;if(e=~~e,r=void 0===r?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e),c.TYPED_ARRAY_SUPPORT)s=this.subarray(e,r),s.__proto__=c.prototype;else{var i=r-e;s=new c(i,void 0);for(var o=0;o<i;++o)s[o]=this[o+e]}return s},c.prototype.readUIntLE=function t(e,r,n){e|=0,r|=0,n||D(e,r,this.length);for(var s=this[e],i=1,o=0;++o<r&&(i*=256);)s+=this[e+o]*i;return s},c.prototype.readUIntBE=function t(e,r,n){e|=0,r|=0,n||D(e,r,this.length);for(var s=this[e+--r],i=1;r>0&&(i*=256);)s+=this[e+--r]*i;return s},c.prototype.readUInt8=function t(e,r){return r||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function t(e,r){return r||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function t(e,r){return r||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function t(e,r){return r||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function t(e,r){return r||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function t(e,r,n){e|=0,r|=0,n||D(e,r,this.length);for(var s=this[e],i=1,o=0;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s},c.prototype.readIntBE=function t(e,r,n){e|=0,r|=0,n||D(e,r,this.length);for(var s=r,i=1,o=this[e+--s];s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o},c.prototype.readInt8=function t(e,r){return r||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function t(e,r){r||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function t(e,r){r||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function t(e,r){return r||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function t(e,r){return r||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function t(e,r){return r||D(e,4,this.length),s.read(this,e,!0,23,4)},c.prototype.readFloatBE=function t(e,r){return r||D(e,4,this.length),s.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function t(e,r){return r||D(e,8,this.length),s.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function t(e,r){return r||D(e,8,this.length),s.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function t(e,r,n,s){if(e=+e,r|=0,n|=0,!s){var i=Math.pow(2,8*n)-1;B(this,e,r,n,i,0)}var o=1,a=0;for(this[r]=255&e;++a<n&&(o*=256);)this[r+a]=e/o&255;return r+n},c.prototype.writeUIntBE=function t(e,r,n,s){if(e=+e,r|=0,n|=0,!s){var i=Math.pow(2,8*n)-1;B(this,e,r,n,i,0)}var o=n-1,a=1;for(this[r+o]=255&e;--o>=0&&(a*=256);)this[r+o]=e/a&255;return r+n},c.prototype.writeUInt8=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},c.prototype.writeUInt16LE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):q(this,e,r,!0),r+2},c.prototype.writeUInt16BE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):q(this,e,r,!1),r+2},c.prototype.writeUInt32LE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):H(this,e,r,!0),r+4},c.prototype.writeUInt32BE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):H(this,e,r,!1),r+4},c.prototype.writeIntLE=function t(e,r,n,s){if(e=+e,r|=0,!s){var i=Math.pow(2,8*n-1);B(this,e,r,n,i-1,-i)}var o=0,a=1,u=0;for(this[r]=255&e;++o<n&&(a*=256);)e<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n},c.prototype.writeIntBE=function t(e,r,n,s){if(e=+e,r|=0,!s){var i=Math.pow(2,8*n-1);B(this,e,r,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[r+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(e/a>>0)-u&255;return r+n},c.prototype.writeInt8=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},c.prototype.writeInt16LE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):q(this,e,r,!0),r+2},c.prototype.writeInt16BE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):q(this,e,r,!1),r+2},c.prototype.writeInt32LE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):H(this,e,r,!0),r+4},c.prototype.writeInt32BE=function t(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):H(this,e,r,!1),r+4},c.prototype.writeFloatLE=function t(e,r,n){return W(this,e,r,!0,n)},c.prototype.writeFloatBE=function t(e,r,n){return W(this,e,r,!1,n)},c.prototype.writeDoubleLE=function t(e,r,n){return G(this,e,r,!0,n)},c.prototype.writeDoubleBE=function t(e,r,n){return G(this,e,r,!1,n)},c.prototype.copy=function t(e,r,n,s){if(n||(n=0),s||0===s||(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);var i=s-n,o;if(this===e&&n<r&&r<s)for(o=i-1;o>=0;--o)e[o+r]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),r);return i},c.prototype.fill=function t(e,r,n,s){if("string"==typeof e){if("string"==typeof r?(s=r,r=0,n=this.length):"string"==typeof n&&(s=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!c.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var o;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=r;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:J(new c(e,s).toString()),u=a.length;for(o=0;o<n-r;++o)this[o+r]=a[o%u]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function z(t){if(t=K(t).replace(Y,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function K(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var r;e=e||1/0;for(var n=t.length,s=null,i=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Q(t,e){for(var r,n,s,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function Z(t){return n.toByteArray(z(t))}function tt(t,e,r,n){for(var s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function et(t){return t!=t}}).call(this,r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAsync=void 0;var n=r(63),s=i(n);function i(t){return t&&t.__esModule?t:{default:t}}var o="function"==typeof Symbol;function a(t){return o&&"AsyncFunction"===t[Symbol.toStringTag]}function u(t){return a(t)?(0,s.default)(t):t}e.default=u,e.isAsync=a},function(t,e,r){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var s={};function i(t,e,r){function i(t,r,n){return"string"==typeof e?e:e(t,r,n)}r||(r=Error);var o=function(t){function e(e,r,n){return t.call(this,i(e,r,n))||this}return n(e,t),e}(r);o.prototype.name=r.name,o.prototype.code=t,s[t]=o}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function a(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function u(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function c(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}i("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(t,e,r){var n,s;if("string"==typeof e&&a(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be",u(t," argument"))s="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var i=c(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(i," ").concat(n," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r),s},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=s},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=c;var s=r(36),i=r(41);r(11)(c,s);for(var o=n(i.prototype),a=0;a<o.length;a++){var u=o[a];c.prototype[u]||(c.prototype[u]=i.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),i.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function t(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function t(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function t(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function t(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function t(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(3))},function(t,e){"function"==typeof Object.create?t.exports=function t(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function t(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(t,e,r){"use strict";r.r(e),r.d(e,"stringify",function(){return E}),r.d(e,"parse",function(){return f});var n=r(23),s=/(?:[\0-\x1F"\\]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t){this.value=t}function e(e){var r,n;function s(t,e){return new Promise(function(s,o){var a={key:t,arg:e,resolve:s,reject:o,next:null};n?n=n.next=a:(r=n=a,i(t,e))})}function i(r,n){try{var s=e[r](n),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){i("next",t)},function(t){i("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}r=r.next,r?i(r.key,r.arg):n=null}this._invoke=s,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},h=function(){function t(e,r){a(this,t),this.text=""+e,this.at=0,this.ch=" ",this.reviver=r}return u(t,[{key:"error",value:function t(e){return new Error(JSON.stringify({name:"SyntaxError",message:e,at:this.at,text:this.text,context:this.chars.slice(this.at-5,this.at+5).join()}))}},{key:"next",value:function t(e){if(e&&e!==this.ch)throw this.error("Expected '"+e+"' instead of '"+this.ch+"'");return this.ch=this.chars[this.at],this.at+=1,this.ch}},{key:"number",value:function t(){var e="";for("-"===this.ch&&(e="-",this.next("-"));this.ch>="0"&&this.ch<="9";)e+=this.ch,this.next();if("."===this.ch){if(e+=".",this.next(),!(this.ch>="0"&&this.ch<="9"))throw this.error("Bad number: partial fraction number");for(e+=this.ch;this.next()&&this.ch>="0"&&this.ch<="9";)e+=this.ch}if("e"===this.ch||"E"===this.ch)for(e+=this.ch,this.next(),"-"!==this.ch&&"+"!==this.ch||(e+=this.ch,this.next());this.ch>="0"&&this.ch<="9";)e+=this.ch,this.next();if(e.match(/^-?0\d/))throw this.error("Bad number: leading zero");return e.length>15||e.toUpperCase().indexOf("E")>=0?new n(e):+e}},{key:"string",value:function t(){var t="";if('"'===this.ch)for(;this.next();){if('"'===this.ch)return this.next(),t;if("\\"===this.ch)if(this.next(),"u"===this.ch){for(var e=0,r=0;r<4;r+=1){var n=parseInt(this.next(),16);if(!Number.isFinite(n))throw this.error("Bad unicode code point");e=16*e+n}t+=String.fromCodePoint(e)}else{if("string"!=typeof l[this.ch])break;t+=l[this.ch]}else{if(this.ch.match(s))break;t+=this.ch}}throw this.error("Bad string")}},{key:"white",value:function t(){for(;this.ch&&this.ch<=" ";)this.next()}},{key:"word",value:function t(){switch(this.ch){case"t":return this.next("t"),this.next("r"),this.next("u"),this.next("e"),!0;case"f":return this.next("f"),this.next("a"),this.next("l"),this.next("s"),this.next("e"),!1;case"n":return this.next("n"),this.next("u"),this.next("l"),this.next("l"),null;default:throw this.error("Unexpected '"+this.ch+"'")}}},{key:"array",value:function t(){var t=[];if("["===this.ch){if(this.next("["),this.white(),"]"===this.ch)return this.next("]"),t;for(;this.ch;){if(t.push(this.value()),this.white(),"]"===this.ch)return this.next("]"),t;this.next(","),this.white()}}throw this.error("Bad array")}},{key:"object",value:function t(){var e=void 0,t={};if("{"===this.ch){if(this.next("{"),this.white(),"}"===this.ch)return this.next("}"),t;for(;this.ch;){if(e=this.string(),this.white(),this.next(":"),t[e]=this.value(),this.white(),"}"===this.ch)return this.next("}"),t;this.next(","),this.white()}}throw this.error("Bad object")}},{key:"value",value:function t(){switch(this.white(),this.ch){case"{":return this.object();case"[":return this.array();case'"':return this.string();case"-":return this.number();default:return this.ch>="0"&&this.ch<="9"?this.number():this.word()}}},{key:"parse",value:function t(){this.chars=[].concat(c(this.text));var e=this.value();if(this.white(),this.ch)throw this.error("Syntax error");return"function"==typeof this.reviver?this.walk({"":e},""):e}},{key:"walk",value:function t(e,r){var n=this,s=void 0,o=e[r];return o&&"object"===(void 0===o?"undefined":i(o))&&Object.keys(o).forEach(function(t){s=n.walk(o,t),void 0!==s?o[t]=s:delete o[t]}),this.reviver.call(null,e,r,o)}}]),t}(),f=function(t,e){return new h(t,e).parse()},p=function(t,e){return(""+"0".repeat(e)+t.codePointAt(0).toString(16).toUpperCase()).slice(-e)},d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g=function(t){if(!s.test(t))return'"'+t+'"';var e="",r=!0,n=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done);r=!0){var u=a.value;if(s.test(u)){var c=d[u];e+=c||"\\u"+p(u,4)}else e+=u}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return'"'+e+'"'},y=/^(-?\d+)(E-\d+)$/;function w(t){var e=t.match(y);return e?e[1]+".0"+e[2]:t}var m=function(t){var e=new n(t);return e.isInteger()?e.toFixed():w(e.toExponential().toUpperCase().replace("+",""))},b=function(t,e){if(t===e)return 0;var r=[].concat(c(t)),n=[].concat(c(e));if(0===r.length&&0===n.length)return 0;var s=-1;return r.some(function(t,e){var r=n[e];return r?t.codePointAt(0)!==r.codePointAt(0)&&(s=p(t,8).localeCompare(p(r,8)),!0):(s=1,!0)}),s},v=function(t,e,r,n){return 0===t.length?e:r?e[0]+"\n"+r+t.join(",\n"+r)+"\n"+n+e[1]:""+e[0]+t.join(",")+e[1]};function _(t){return t&&t.constructor&&"BigNumber"===t.constructor.name}var T=function(){function t(e,r,n){a(this,t),this.gap=e,this.indent=r,this.replacer=n}return u(t,[{key:"transform",value:function t(e,r){var n=this,s=this.gap,o=r[e];switch(o&&"object"===(void 0===o?"undefined":i(o))&&"function"==typeof o.toJSON&&!_(o)&&(o=o.toJSON(e)),"function"==typeof this.replacer&&(o=this.replacer.call(null,r,e,o)),void 0===o?"undefined":i(o)){case"string":return g(o);case"number":return m(o);case"undefined":return"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(_(o))return m(o);var a=[];if(this.gap+=this.indent,Array.isArray(o)){o.forEach(function(t,e){a.push(n.transform(e,o)||"null")});var u=v(a,"[]",this.gap,s);return this.gap=s,u}if(this.replacer&&"object"===i(this.replacer))this.replacer.forEach(function(t){if("string"==typeof t){var e=n.transform(t,o);e&&a.push(n.format(t,e))}});else{var c=Object.keys(o).sort(b);c.forEach(function(t){if(Object.prototype.hasOwnProperty.call(o,t)){var e=n.transform(t,o);e&&a.push(n.format(t,e))}})}var l=v(a,"{}",this.gap,s);return this.gap=s,l;default:throw new Error("Unexpected object type: "+(void 0===o?"undefined":i(o)))}}},{key:"format",value:function t(e,r){return g(e)+(this.gap?": ":":")+r}}]),t}();function E(t,e,r){var n="",s="";if("number"==typeof r?s=" ".repeat(r):"string"==typeof r&&(s=r),e&&"function"!=typeof e&&("object"!==(void 0===e?"undefined":i(e))||"number"!=typeof e.length))throw new Error("JSON.stringify");return new T("",s,e).transform("",{"":t})}},function(t,e,r){const n=r(2);utils={},utils.consolearr=(t=>t&&t.length>0?[t.length+" items inc:",t[t.length-1]]:t),utils.stringfrom=function(t,e={}){try{return"Url"===t.constructor.name?t.href:"string"==typeof t?t:t.toString()}catch(e){throw new n.CodingError(`Unable to turn ${t} into a string ${e.message}`)}},utils.p_timeout=function(t,e,r){let s=null;return Promise.race([new Promise((t,i)=>{s=setTimeout(i,e,new n.TimeoutError(r||`Timed out in ${e}ms`))}),t.then(t=>(clearTimeout(s),t))])},utils.createElement=function(t,e,r){var n=document.createElement(t);for(let t in e){let r="classname"===t.toLowerCase()?"class":t;if("dangerouslySetInnerHTML"===t&&(n.innerHTML=e[t].__html,delete e.dangerouslySetInnerHTML),e.hasOwnProperty(t)){let s=e[t];if(!0===s)n.setAttribute(r,t);else if("object"!=typeof s||Array.isArray(s))!1!==s&&null!=s&&n.setAttribute(r,s.toString());else if(["style"].includes(r))for(let t in s)n[r][t]=s[t];else n[r]=s}}for(let t=2;t<arguments.length;t++){let e=arguments[t];e&&(Array.isArray(e)?e.map(t=>n.appendChild(null==t.nodeType?document.createTextNode(t.toString()):t)):n.appendChild(null==e.nodeType?document.createTextNode(e.toString()):e))}return n},e=t.exports=utils},function(t,e,r){(function(n){const s=r(55),i=r(2),o=i.TransportError,a=r(0)("dweb-transports:httptools"),u=r(56);let c;function l({concurrency:t}){c=u((t,e)=>{t.loopguard===("undefined"!=typeof window&&window.loopguard)?fetch(t.req).then(r=>{a("Fetch of %s opened",t.what),c.concurrency=Math.min(c.concurrency+1,c.running()+6),e(null),t.cb(null,r)}).catch(r=>{c.concurrency=Math.max(c.concurrency-1,6,c.running()-1),e(r),--t.count>0&&!["ENOTFOUND"].includes(r.errno)?(a("Retrying fetch of %s in %s ms: %s",t.what,t.ms,r.message),c.push(t)):t.cb(r)}):(err=new Error(`Dropping fetch of ${t.what} as window changed from ${t.loopguard} to ${window.loopguard}`),t.cb(err),e(err))},t)}function h(t,e,r,n){return new Promise((s,i)=>{r=r||1,c.push({req:t,count:r,ms:e,what:n,loopguard:"undefined"!=typeof window&&window.loopguard,cb:(t,e)=>{t?i(t):s(e)}})})}async function f(t,e,r,n){let s,i="undefined"!=typeof window&&window.loopguard;for(r=r||1;r--&&i===("undefined"!=typeof window&&window.loopguard);)try{return await fetch(t)}catch(t){s=t,a("Delaying %s by %d ms because %s",n,e,t.message),await new Promise(t=>{setTimeout(()=>{t()},e)}),e=Math.floor(e*(1+Math.random()))}throw console.warn("loopfetch of",n,"failed"),i!==("undefined"!=typeof window&&window.loopguard)?(a("Looping exited because of page change %s",n),new Error("Looping exited because of page change "+n)):s}"undefined"==typeof fetch&&(fetch=s,Headers=fetch.Headers,Request=fetch.Request),httptools={},l({concurrency:6}),httptools.p_httpfetch=async function(t,e,{wantstream:r=!1,retries:s,silentFinalError:i=!1}={}){try{a("p_httpfetch: %s %o",t,e.headers.range||"");let u=new Request(t,e),c=await h(u,500,s,t);if(c.ok){let t=c.headers.get("Content-Type");return r?c.body:void 0!==t&&t.startsWith("application/json")?c.json():void 0!==t&&t.startsWith("text")?c.text():new n(await c.arrayBuffer())}throw new o(`Transport Error ${t} ${c.status}: ${c.statusText}`)}catch(e){throw i||a("p_httpfetch failed: %s",e.message),e instanceof o?e:new o(`Transport error thrown by ${t}: ${e.message}`)}},httptools.p_GET=function(t,e={},r){"string"!=typeof t&&(t=t.href);let n=new Headers;(e.start||e.end)&&n.append("range",`bytes=${e.start||0}-${e.end<1/0?e.end:""}`);const s=void 0===e.retries?12:e.retries;let i={method:"GET",headers:n,mode:"cors",cache:e.noCache?"no-cache":"default",redirect:"follow",keepalive:!0};const o=httptools.p_httpfetch(t,i,{retries:s,wantstream:e.wantstream,silentFinalError:e.silentFinalError});if(!r)return o;o.then(t=>{try{r(null,t)}catch(t){a("p_GET Uncaught error %O",t)}}).catch(t=>r(t))},httptools.p_POST=function(t,e={},r){"function"==typeof e&&(r=e,e={}),"string"!=typeof t&&(t=t.href);const n=void 0===e.retries?0:e.retries;let s={method:"POST",headers:{},body:e.data,mode:"cors",cache:"default",redirect:"follow",keepalive:!1};e.contenttype&&(s.headers["Content-Type"]=e.contenttype);const i=httptools.p_httpfetch(t,s,{retries:n});if(!r)return i;i.then(t=>r(null,t)).catch(t=>r(t))},e=t.exports=httptools}).call(this,r(7).Buffer)},function(t,e){function r(){}t.exports=r},function(t,e){function r(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id=16},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,r){var n=r(66),s=r(32);function i(t){return null!=t&&s(t.length)&&!n(t)}t.exports=i},function(t,e,r){var n=r(29),s=r(67),i=r(68),o="[object Null]",a="[object Undefined]",u=n?n.toStringTag:void 0;function c(t){return null==t?void 0===t?a:o:u&&u in Object(t)?s(t):i(t)}t.exports=c},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){"use strict";var n=r(9).codes.ERR_STREAM_PREMATURE_CLOSE;function s(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];t.apply(this,n)}}}function i(){}function o(t){return t.setHeader&&"function"==typeof t.abort}function a(t,e,r){if("function"==typeof e)return a(t,null,e);e||(e={}),r=s(r||i);var u=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,l=function e(){t.writable||f()},h=t._writableState&&t._writableState.finished,f=function e(){c=!1,h=!0,u||r.call(t)},p=t._readableState&&t._readableState.endEmitted,d=function e(){u=!1,p=!0,c||r.call(t)},g=function e(n){r.call(t,n)},y=function e(){var s;return u&&!p?(t._readableState&&t._readableState.ended||(s=new n),r.call(t,s)):c&&!h?(t._writableState&&t._writableState.ended||(s=new n),r.call(t,s)):void 0},w=function e(){t.req.on("finish",f)};return o(t)?(t.on("complete",f),t.on("abort",y),t.req?w():t.on("request",w)):c&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",f),!1!==e.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",f),t.removeListener("abort",y),t.removeListener("request",w),t.req&&t.req.removeListener("finish",f),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",g),t.removeListener("close",y)}}t.exports=a},function(t,e,r){var n;!function(s){"use strict";var i,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,u=Math.ceil,c=Math.floor,l="[BigNumber Error] ",h=l+"Number primitive has more than 15 significant digits: ",f=1e14,p=14,d=9007199254740991,g=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,w=1e9;function m(t){var e,r,n,s=W.prototype={constructor:W,toString:null,valueOf:null},i=new W(1),R=20,C=4,x=-7,O=21,k=-1e7,F=1e7,P=!1,j=1,N=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",L,M,D,B,q,H,$;function W(t,e){var s,i,a,u,l,f,g,y,w=this;if(!(w instanceof W))return new W(t,e);if(null==e){if(t&&!0===t._isBigNumber)return w.s=t.s,void(!t.c||t.e>F?w.c=w.e=null:t.e<k?w.c=[w.e=0]:(w.e=t.e,w.c=t.c.slice()));if((f="number"==typeof t)&&0*t==0){if(w.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,l=t;l>=10;l/=10,u++);return void(u>F?w.c=w.e=null:(w.e=u,w.c=[t]))}y=String(t)}else{if(!o.test(y=String(t)))return n(w,y,f);w.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(u=y.indexOf("."))>-1&&(y=y.replace(".","")),(l=y.search(/e/i))>0?(u<0&&(u=l),u+=+y.slice(l+1),y=y.substring(0,l)):u<0&&(u=y.length)}else{if(T(e,2,I.length,"Base"),10==e)return w=new W(t),K(w,R+w.e+1,C);if(y=String(t),f="number"==typeof t){if(0*t!=0)return n(w,y,f,e);if(w.s=1/t<0?(y=y.slice(1),-1):1,W.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(h+t)}else w.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(s=I.slice(0,e),u=l=0,g=y.length;l<g;l++)if(s.indexOf(i=y.charAt(l))<0){if("."==i){if(l>u){u=g;continue}}else if(!a&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){a=!0,l=-1,u=0;continue}return n(w,String(t),f,e)}f=!1,y=r(y,e,10,w.s),(u=y.indexOf("."))>-1?y=y.replace(".",""):u=y.length}for(l=0;48===y.charCodeAt(l);l++);for(g=y.length;48===y.charCodeAt(--g););if(y=y.slice(l,++g)){if(g-=l,f&&W.DEBUG&&g>15&&(t>d||t!==c(t)))throw Error(h+w.s*t);if((u=u-l-1)>F)w.c=w.e=null;else if(u<k)w.c=[w.e=0];else{if(w.e=u,w.c=[],l=(u+1)%p,u<0&&(l+=p),l<g){for(l&&w.c.push(+y.slice(0,l)),g-=p;l<g;)w.c.push(+y.slice(l,l+=p));l=p-(y=y.slice(l)).length}else l-=g;for(;l--;y+="0");w.c.push(+y)}}else w.c=[w.e=0]}function G(t,e,r,n){var s,i,o,a,u;if(null==r?r=C:T(r,0,8),!t.c)return t.toString();if(s=t.c[0],o=t.e,null==e)u=v(t.c),u=1==n||2==n&&(o<=x||o>=O)?S(u,o):A(u,o,"0");else if(t=K(new W(t),e,r),i=t.e,u=v(t.c),a=u.length,1==n||2==n&&(e<=i||i<=x)){for(;a<e;u+="0",a++);u=S(u,i)}else if(e-=o,u=A(u,i,"0"),i+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if(e+=i-a,e>0)for(i+1==a&&(u+=".");e--;u+="0");return t.s<0&&s?"-"+u:u}function Y(t,e){for(var r,n=1,s=new W(t[0]);n<t.length;n++){if(r=new W(t[n]),!r.s){s=r;break}e.call(s,r)&&(s=r)}return s}function z(t,e,r){for(var n=1,s=e.length;!e[--s];e.pop());for(s=e[0];s>=10;s/=10,n++);return(r=n+r*p-1)>F?t.c=t.e=null:r<k?t.c=[t.e=0]:(t.e=r,t.c=e),t}function K(t,e,r,n){var s,i,o,a,l,h,d,y=t.c,w=g;if(y){t:{for(s=1,a=y[0];a>=10;a/=10,s++);if(i=e-s,i<0)i+=p,o=e,l=y[h=0],d=l/w[s-o-1]%10|0;else if(h=u((i+1)/p),h>=y.length){if(!n)break t;for(;y.length<=h;y.push(0));l=d=0,s=1,i%=p,o=i-p+1}else{for(l=a=y[h],s=1;a>=10;a/=10,s++);i%=p,o=i-p+s,d=o<0?0:l/w[s-o-1]%10|0}if(n=n||e<0||null!=y[h+1]||(o<0?l:l%w[s-o-1]),n=r<4?(d||n)&&(0==r||r==(t.s<0?3:2)):d>5||5==d&&(4==r||n||6==r&&(i>0?o>0?l/w[s-o]:0:y[h-1])%10&1||r==(t.s<0?8:7)),e<1||!y[0])return y.length=0,n?(e-=t.e+1,y[0]=w[(p-e%p)%p],t.e=-e||0):y[0]=t.e=0,t;if(0==i?(y.length=h,a=1,h--):(y.length=h+1,a=w[p-i],y[h]=o>0?c(l/w[s-o]%w[o])*a:0),n)for(;;){if(0==h){for(i=1,o=y[0];o>=10;o/=10,i++);for(o=y[0]+=a,a=1;o>=10;o/=10,a++);i!=a&&(t.e++,y[0]==f&&(y[0]=1));break}if(y[h]+=a,y[h]!=f)break;y[h--]=0,a=1}for(i=y.length;0===y[--i];y.pop());}t.e>F?t.c=t.e=null:t.e<k&&(t.c=[t.e=0])}return t}function V(t){var e,r=t.e;return null===r?t.toString():(e=v(t.c),e=r<=x||r>=O?S(e,r):A(e,r,"0"),t.s<0?"-"+e:e)}return W.clone=m,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(l+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(r=t[e],T(r,0,w,e),R=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(r=t[e],T(r,0,8,e),C=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(r=t[e],r&&r.pop?(T(r[0],-w,0,e),T(r[1],0,w,e),x=r[0],O=r[1]):(T(r,-w,w,e),x=-(O=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if(r=t[e],r&&r.pop)T(r[0],-w,-1,e),T(r[1],1,w,e),k=r[0],F=r[1];else{if(T(r,-w,w,e),!r)throw Error(l+e+" cannot be zero: "+r);k=-(F=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if(r=t[e],r!==!!r)throw Error(l+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw P=!r,Error(l+"crypto unavailable");P=r}else P=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(r=t[e],T(r,0,9,e),j=r),t.hasOwnProperty(e="POW_PRECISION")&&(r=t[e],T(r,0,w,e),N=r),t.hasOwnProperty(e="FORMAT")){if(r=t[e],"object"!=typeof r)throw Error(l+e+" not an object: "+r);U=r}if(t.hasOwnProperty(e="ALPHABET")){if(r=t[e],"string"!=typeof r||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(l+e+" invalid: "+r);I=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:C,EXPONENTIAL_AT:[x,O],RANGE:[k,F],CRYPTO:P,MODULO_MODE:j,POW_PRECISION:N,FORMAT:U,ALPHABET:I}},W.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!W.DEBUG)return!0;var e,r,n=t.c,s=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&s>=-w&&s<=w&&s===c(s)){if(0===n[0]){if(0===s&&1===n.length)return!0;break t}if(e=(s+1)%p,e<1&&(e+=p),String(n[0]).length==e){for(e=0;e<n.length;e++)if(r=n[e],r<0||r>=f||r!==c(r))break t;if(0!==r)return!0}}}else if(null===n&&null===s&&(null===i||1===i||-1===i))return!0;throw Error(l+"Invalid BigNumber: "+t)},W.maximum=W.max=function(){return Y(arguments,s.lt)},W.minimum=W.min=function(){return Y(arguments,s.gt)},W.random=(L=9007199254740992,M=Math.random()*L&2097151?function(){return c(Math.random()*L)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,s,o,a=0,h=[],f=new W(i);if(null==t?t=R:T(t,0,w),s=u(t/p),P)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));a<s;)o=131072*e[a]+(e[a+1]>>>11),o>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[a]=r[0],e[a+1]=r[1]):(h.push(o%1e14),a+=2);a=s/2}else{if(!crypto.randomBytes)throw P=!1,Error(l+"crypto unavailable");for(e=crypto.randomBytes(s*=7);a<s;)o=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6],o>=9e15?crypto.randomBytes(7).copy(e,a):(h.push(o%1e14),a+=7);a=s/7}if(!P)for(;a<s;)o=M(),o<9e15&&(h[a++]=o%1e14);for(s=h[--a],t%=p,s&&t&&(o=g[p-t],h[a]=c(s/o)*o);0===h[a];h.pop(),a--);if(a<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=p);for(a=1,o=h[0];o>=10;o/=10,a++);a<p&&(n-=p-a)}return f.e=n,f.c=h,f}),W.sum=function(){for(var t=1,e=arguments,r=new W(e[0]);t<e.length;)r=r.plus(e[t++]);return r},r=function(){var t="0123456789";function r(t,e,r,n){for(var s,i=[0],o,a=0,u=t.length;a<u;){for(o=i.length;o--;i[o]*=e);for(i[0]+=n.indexOf(t.charAt(a++)),s=0;s<i.length;s++)i[s]>r-1&&(null==i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/r|0,i[s]%=r)}return i.reverse()}return function(n,s,i,o,a){var u,c,l,h,f,p,d,g,y=n.indexOf("."),w=R,m=C;for(y>=0&&(h=N,N=0,n=n.replace(".",""),g=new W(s),p=g.pow(n.length-y),N=h,g.c=r(A(v(p.c),p.e,"0"),10,i,t),g.e=g.c.length),d=r(n,s,i,a?(u=I,t):(u=t,I)),l=h=d.length;0==d[--h];d.pop());if(!d[0])return u.charAt(0);if(y<0?--l:(p.c=d,p.e=l,p.s=o,p=e(p,g,w,m,i),d=p.c,f=p.r,l=p.e),c=l+w+1,y=d[c],h=i/2,f=f||c<0||null!=d[c+1],f=m<4?(null!=y||f)&&(0==m||m==(p.s<0?3:2)):y>h||y==h&&(4==m||f||6==m&&1&d[c-1]||m==(p.s<0?8:7)),c<1||!d[0])n=f?A(u.charAt(1),-w,u.charAt(0)):u.charAt(0);else{if(d.length=c,f)for(--i;++d[--c]>i;)d[c]=0,c||(++l,d=[1].concat(d));for(h=d.length;!d[--h];);for(y=0,n="";y<=h;n+=u.charAt(d[y++]));n=A(n,l,u.charAt(0))}return n}}(),e=function(){function t(t,e,r){var n,s,i,o,a=0,u=t.length,c=e%y,l=e/y|0;for(t=t.slice();u--;)i=t[u]%y,o=t[u]/y|0,n=l*i+o*c,s=c*i+n%y*y+a,a=(s/r|0)+(n/y|0)+l*o,t[u]=s%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var s,i;if(r!=n)i=r>n?1:-1;else for(s=i=0;s<r;s++)if(t[s]!=e[s]){i=t[s]>e[s]?1:-1;break}return i}function r(t,e,r,n){for(var s=0;r--;)t[r]-=s,s=t[r]<e[r]?1:0,t[r]=s*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,s,i,o,a){var u,l,h,d,g,y,w,m,v,_,T,E,S,A,R,C,x,O=n.s==s.s?1:-1,k=n.c,F=s.c;if(!(k&&k[0]&&F&&F[0]))return new W(n.s&&s.s&&(k?!F||k[0]!=F[0]:F)?k&&0==k[0]||!F?0*O:O/0:NaN);for(m=new W(O),v=m.c=[],l=n.e-s.e,O=i+l+1,a||(a=f,l=b(n.e/p)-b(s.e/p),O=O/p|0),h=0;F[h]==(k[h]||0);h++);if(F[h]>(k[h]||0)&&l--,O<0)v.push(1),d=!0;else{for(A=k.length,C=F.length,h=0,O+=2,g=c(a/(F[0]+1)),g>1&&(F=t(F,g,a),k=t(k,g,a),C=F.length,A=k.length),S=C,_=k.slice(0,C),T=_.length;T<C;_[T++]=0);x=F.slice(),x=[0].concat(x),R=F[0],F[1]>=a/2&&R++;do{if(g=0,u=e(F,_,C,T),u<0){if(E=_[0],C!=T&&(E=E*a+(_[1]||0)),g=c(E/R),g>1)for(g>=a&&(g=a-1),y=t(F,g,a),w=y.length,T=_.length;1==e(y,_,w,T);)g--,r(y,C<w?x:F,w,a),w=y.length,u=1;else 0==g&&(u=g=1),y=F.slice(),w=y.length;if(w<T&&(y=[0].concat(y)),r(_,y,T,a),T=_.length,-1==u)for(;e(F,_,C,T)<1;)g++,r(_,C<T?x:F,T,a),T=_.length}else 0===u&&(g++,_=[0]);v[h++]=g,_[0]?_[T++]=k[S]||0:(_=[k[S]],T=1)}while((S++<A||null!=_[0])&&O--);d=null!=_[0],v[0]||v.splice(0,1)}if(a==f){for(h=1,O=v[0];O>=10;O/=10,h++);K(m,i+(m.e=h+l*p-1)+1,o,d)}else m.e=l,m.r=+d;return m}}(),D=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,q=/^\.([^.]+)$/,H=/^-?(Infinity|NaN)$/,$=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(t,e,r,n){var s,i=r?e:e.replace($,"");if(H.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(D,function(t,e,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=s?t:e}),n&&(s=n,i=i.replace(B,"$1").replace(q,"0.$1")),e!=i))return new W(i,s);if(W.DEBUG)throw Error(l+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},s.absoluteValue=s.abs=function(){var t=new W(this);return t.s<0&&(t.s=1),t},s.comparedTo=function(t,e){return _(this,new W(t,e))},s.decimalPlaces=s.dp=function(t,e){var r,n,s,i=this;if(null!=t)return T(t,0,w),null==e?e=C:T(e,0,8),K(new W(i),t+i.e+1,e);if(!(r=i.c))return null;if(n=((s=r.length-1)-b(this.e/p))*p,s=r[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},s.dividedBy=s.div=function(t,r){return e(this,new W(t,r),R,C)},s.dividedToIntegerBy=s.idiv=function(t,r){return e(this,new W(t,r),0,1)},s.exponentiatedBy=s.pow=function(t,e){var r,n,s,o,a,h,f,d,g,y=this;if(t=new W(t),t.c&&!t.isInteger())throw Error(l+"Exponent not an integer: "+V(t));if(null!=e&&(e=new W(e)),h=t.e>14,!y.c||!y.c[0]||1==y.c[0]&&!y.e&&1==y.c.length||!t.c||!t.c[0])return g=new W(Math.pow(+V(y),h?2-E(t):+V(t))),e?g.mod(e):g;if(f=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new W(NaN);n=!f&&y.isInteger()&&e.isInteger(),n&&(y=y.mod(e))}else{if(t.e>9&&(y.e>0||y.e<-1||(0==y.e?y.c[0]>1||h&&y.c[1]>=24e7:y.c[0]<8e13||h&&y.c[0]<=9999975e7)))return o=y.s<0&&E(t)?-0:0,y.e>-1&&(o=1/o),new W(f?1/o:o);N&&(o=u(N/p+2))}for(h?(r=new W(.5),f&&(t.s=1),d=E(t)):(s=Math.abs(+V(t)),d=s%2),g=new W(i);;){if(d){if(g=g.times(y),!g.c)break;o?g.c.length>o&&(g.c.length=o):n&&(g=g.mod(e))}if(s){if(s=c(s/2),0===s)break;d=s%2}else if(t=t.times(r),K(t,t.e+1,1),t.e>14)d=E(t);else{if(s=+V(t),0===s)break;d=s%2}y=y.times(y),o?y.c&&y.c.length>o&&(y.c.length=o):n&&(y=y.mod(e))}return n?g:(f&&(g=i.div(g)),e?g.mod(e):o?K(g,N,C,a):g)},s.integerValue=function(t){var e=new W(this);return null==t?t=C:T(t,0,8),K(e,e.e+1,t)},s.isEqualTo=s.eq=function(t,e){return 0===_(this,new W(t,e))},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(t,e){return _(this,new W(t,e))>0},s.isGreaterThanOrEqualTo=s.gte=function(t,e){return 1===(e=_(this,new W(t,e)))||0===e},s.isInteger=function(){return!!this.c&&b(this.e/p)>this.c.length-2},s.isLessThan=s.lt=function(t,e){return _(this,new W(t,e))<0},s.isLessThanOrEqualTo=s.lte=function(t,e){return-1===(e=_(this,new W(t,e)))||0===e},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&0==this.c[0]},s.minus=function(t,e){var r,n,s,i,o=this,a=o.s;if(t=new W(t,e),e=t.s,!a||!e)return new W(NaN);if(a!=e)return t.s=-e,o.plus(t);var u=o.e/p,c=t.e/p,l=o.c,h=t.c;if(!u||!c){if(!l||!h)return l?(t.s=-e,t):new W(h?o:NaN);if(!l[0]||!h[0])return h[0]?(t.s=-e,t):new W(l[0]?o:3==C?-0:0)}if(u=b(u),c=b(c),l=l.slice(),a=u-c){for((i=a<0)?(a=-a,s=l):(c=u,s=h),s.reverse(),e=a;e--;s.push(0));s.reverse()}else for(n=(i=(a=l.length)<(e=h.length))?a:e,a=e=0;e<n;e++)if(l[e]!=h[e]){i=l[e]<h[e];break}if(i&&(s=l,l=h,h=s,t.s=-t.s),e=(n=h.length)-(r=l.length),e>0)for(;e--;l[r++]=0);for(e=f-1;n>a;){if(l[--n]<h[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=f}l[n]-=h[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?z(t,l,c):(t.s=3==C?-1:1,t.c=[t.e=0],t)},s.modulo=s.mod=function(t,r){var n,s,i=this;return t=new W(t,r),!i.c||!t.s||t.c&&!t.c[0]?new W(NaN):!t.c||i.c&&!i.c[0]?new W(i):(9==j?(s=t.s,t.s=1,n=e(i,t,0,3),t.s=s,n.s*=s):n=e(i,t,0,j),t=i.minus(n.times(t)),t.c[0]||1!=j||(t.s=i.s),t)},s.multipliedBy=s.times=function(t,e){var r,n,s,i,o,a,u,c,l,h,d,g,w,m,v,_=this,T=_.c,E=(t=new W(t,e)).c;if(!(T&&E&&T[0]&&E[0]))return!_.s||!t.s||T&&!T[0]&&!E||E&&!E[0]&&!T?t.c=t.e=t.s=null:(t.s*=_.s,T&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=b(_.e/p)+b(t.e/p),t.s*=_.s,u=T.length,h=E.length,u<h&&(w=T,T=E,E=w,s=u,u=h,h=s),s=u+h,w=[];s--;w.push(0));for(m=f,v=y,s=h;--s>=0;){for(r=0,d=E[s]%v,g=E[s]/v|0,o=u,i=s+o;i>s;)c=T[--o]%v,l=T[o]/v|0,a=g*c+l*d,c=d*c+a%v*v+w[i]+r,r=(c/m|0)+(a/v|0)+g*l,w[i--]=c%m;w[i]=r}return r?++n:w.splice(0,1),z(t,w,n)},s.negated=function(){var t=new W(this);return t.s=-t.s||null,t},s.plus=function(t,e){var r,n=this,s=n.s;if(t=new W(t,e),e=t.s,!s||!e)return new W(NaN);if(s!=e)return t.s=-e,n.minus(t);var i=n.e/p,o=t.e/p,a=n.c,u=t.c;if(!i||!o){if(!a||!u)return new W(s/0);if(!a[0]||!u[0])return u[0]?t:new W(a[0]?n:0*s)}if(i=b(i),o=b(o),a=a.slice(),s=i-o){for(s>0?(o=i,r=u):(s=-s,r=a),r.reverse();s--;r.push(0));r.reverse()}for(s=a.length,e=u.length,s-e<0&&(r=u,u=a,a=r,e=s),s=0;e;)s=(a[--e]=a[e]+u[e]+s)/f|0,a[e]=f===a[e]?0:a[e]%f;return s&&(a=[s].concat(a),++o),z(t,a,o)},s.precision=s.sd=function(t,e){var r,n,s,i=this;if(null!=t&&t!==!!t)return T(t,1,w),null==e?e=C:T(e,0,8),K(new W(i),t,e);if(!(r=i.c))return null;if(s=r.length-1,n=s*p+1,s=r[s]){for(;s%10==0;s/=10,n--);for(s=r[0];s>=10;s/=10,n++);}return t&&i.e+1>n&&(n=i.e+1),n},s.shiftedBy=function(t){return T(t,-d,d),this.times("1e"+t)},s.squareRoot=s.sqrt=function(){var t,r,n,s,i,o=this,a=o.c,u=o.s,c=o.e,l=R+4,h=new W("0.5");if(1!==u||!a||!a[0])return new W(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);if(u=Math.sqrt(+V(o)),0==u||u==1/0?(r=v(a),(r.length+c)%2==0&&(r+="0"),u=Math.sqrt(+r),c=b((c+1)/2)-(c<0||c%2),u==1/0?r="1e"+c:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+c),n=new W(r)):n=new W(u+""),n.c[0])for(c=n.e,u=c+l,u<3&&(u=0);;)if(i=n,n=h.times(i.plus(e(o,i,l,1))),v(i.c).slice(0,u)===(r=v(n.c)).slice(0,u)){if(n.e<c&&--u,r=r.slice(u-3,u+1),"9999"!=r&&(s||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(K(n,n.e+R+2,1),t=!n.times(n).eq(o));break}if(!s&&(K(i,i.e+R+2,0),i.times(i).eq(o))){n=i;break}l+=4,u+=4,s=1}return K(n,n.e+R+1,C,t)},s.toExponential=function(t,e){return null!=t&&(T(t,0,w),t++),G(this,t,e,1)},s.toFixed=function(t,e){return null!=t&&(T(t,0,w),t=t+this.e+1),G(this,t,e)},s.toFormat=function(t,e,r){var n,s=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=U;else if("object"!=typeof r)throw Error(l+"Argument not an object: "+r);if(n=s.toFixed(t,e),s.c){var i,o=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",h=o[0],f=o[1],p=s.s<0,d=p?h.slice(1):h,g=d.length;if(u&&(i=a,a=u,u=i,g-=i),a>0&&g>0){for(i=g%a||a,h=d.substr(0,i);i<g;i+=a)h+=c+d.substr(i,a);u>0&&(h+=c+d.slice(i)),p&&(h="-"+h)}n=f?h+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):h}return(r.prefix||"")+n+(r.suffix||"")},s.toFraction=function(t){var r,n,s,o,a,u,c,h,f,d,y,w,m=this,b=m.c;if(null!=t&&(c=new W(t),!c.isInteger()&&(c.c||1!==c.s)||c.lt(i)))throw Error(l+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+V(c));if(!b)return new W(m);for(r=new W(i),f=n=new W(i),s=h=new W(i),w=v(b),a=r.e=w.length-m.e-1,r.c[0]=g[(u=a%p)<0?p+u:u],t=!t||c.comparedTo(r)>0?a>0?r:f:c,u=F,F=1/0,c=new W(w),h.c[0]=0;d=e(c,r,0,1),o=n.plus(d.times(s)),1!=o.comparedTo(t);)n=s,s=o,f=h.plus(d.times(o=f)),h=o,r=c.minus(d.times(o=r)),c=o;return o=e(t.minus(n),s,0,1),h=h.plus(o.times(f)),n=n.plus(o.times(s)),h.s=f.s=m.s,a*=2,y=e(f,s,a,C).minus(m).abs().comparedTo(e(h,n,a,C).minus(m).abs())<1?[f,s]:[h,n],F=u,y},s.toNumber=function(){return+V(this)},s.toPrecision=function(t,e){return null!=t&&T(t,1,w),G(this,t,e,2)},s.toString=function(t){var e,n=this,s=n.s,i=n.e;return null===i?s?(e="Infinity",s<0&&(e="-"+e)):e="NaN":(null==t?e=i<=x||i>=O?S(v(n.c),i):A(v(n.c),i,"0"):10===t?(n=K(new W(n),R+i+1,C),e=A(v(n.c),n.e,"0")):(T(t,2,I.length,"Base"),e=r(A(v(n.c),i,"0"),10,t,s,!0)),s<0&&n.c[0]&&(e="-"+e)),e},s.valueOf=s.toJSON=function(){return V(this)},s._isBigNumber=!0,a&&(s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf),null!=t&&W.set(t),W}function b(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,r,n=1,s=t.length,i=t[0]+"";n<s;){for(e=t[n++]+"",r=p-e.length;r--;e="0"+e);i+=e}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function _(t,e){var r,n,s=t.c,i=e.c,o=t.s,a=e.s,u=t.e,c=e.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==c,!s||!i)return n?0:!s^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=s.length)<(c=i.length)?u:c,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return u==c?0:u>c^r?1:-1}function T(t,e,r,n){if(t<e||t>r||t!==c(t))throw Error(l+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function E(t){var e=t.c.length-1;return b(t.e/p)==e&&t.c[e]%2!=0}function S(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function A(t,e,r){var n,s;if(e<0){for(s=r+".";++e;s+=r);t=s+t}else if(n=t.length,++e>n){for(s=r,e-=n;--e;s+=r);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}i=m(),i.default=i.BigNumber=i,n=function(){return i}.call(e,r,e,t),void 0===n||(t.exports=n)}(this)},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.hasNextTick=e.hasSetImmediate=void 0,e.fallback=c,e.wrap=l;var n=r(26),s=i(n);function i(t){return t&&t.__esModule?t:{default:t}}var o=e.hasSetImmediate="function"==typeof setImmediate&&setImmediate,a=e.hasNextTick="object"==typeof t&&"function"==typeof t.nextTick,u;function c(t){setTimeout(t,0)}function l(t){return function(e){var r=(0,s.default)(arguments,1);t(function(){e.apply(null,r)})}}u=o?setImmediate:a?t.nextTick:c,e.default=l(u)}).call(this,r(3))},function(t,e,r){"use strict";function n(t,e){e|=0;for(var r=Math.max(t.length-e,0),n=Array(r),s=0;s<r;s++)n[s]=t[e+s];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e){function r(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var n=(0,s.default)(t)?v:_;n(t,(0,m.default)(e),r)};var n=r(19),s=b(n),i=r(33),o=b(i),a=r(69),u=b(a),c=r(89),l=b(c),h=r(15),f=b(h),p=r(34),d=b(p),g=r(18),y=b(g),w=r(8),m=b(w);function b(t){return t&&t.__esModule?t:{default:t}}function v(t,e,r){r=(0,d.default)(r||f.default);var n=0,s=0,i=t.length;function a(t,e){t?r(t):++s!==i&&e!==o.default||r(null)}for(0===i&&r(null);n<i;n++)e(t[n],n,(0,y.default)(a))}var _=(0,l.default)(u.default,1/0);t.exports=e.default},function(t,e,r){var n=r(30),s=n.Symbol;t.exports=s},function(t,e,r){var n=r(31),s="object"==typeof self&&self&&self.Object===Object&&self,i=n||s||Function("return this")();t.exports=i},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(5))},function(t,e){var r=9007199254740991;function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={},t.exports=e.default},function(t,e,r){"use strict";function n(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,r){e=t.exports=r(36),e.Stream=e,e.Readable=e,e.Writable=r(41),e.Duplex=r(10),e.Transform=r(43),e.PassThrough=r(103),e.finished=r(22),e.pipeline=r(104)},function(t,e,r){"use strict";(function(e,n){var s;t.exports=k,k.ReadableState=O;var i=r(37).EventEmitter,o=function t(e,r){return e.listeners(r).length},a=r(38),u=r(7).Buffer,c=e.Uint8Array||function(){};function l(t){return u.from(t)}function h(t){return u.isBuffer(t)||t instanceof c}var f=r(96),p;p=f&&f.debuglog?f.debuglog("stream"):function t(){};var d=r(97),g=r(39),y=r(40),w=y.getHighWaterMark,m=r(9).codes,b=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,T=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E=r(99),S=E.emitExperimentalWarning,A,R;r(11)(k,a);var C=["error","close","destroy","pause","resume"];function x(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function O(t,e,n){s=s||r(10),t=t||{},"boolean"!=typeof n&&(n=e instanceof s),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(A||(A=r(42).StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function k(t){if(s=s||r(10),!(this instanceof k))return new k(t);var e=this instanceof s;this._readableState=new O(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function F(t,e,r,n,s){p("readableAddChunk",e);var i=t._readableState,o;if(null===e)i.reading=!1,L(t,i);else if(s||(o=j(i,e)),o)t.emit("error",o);else if(i.objectMode||e&&e.length>0)if("string"==typeof e||i.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=l(e)),n)i.endEmitted?t.emit("error",new T):P(t,i,e,!0);else if(i.ended)t.emit("error",new v);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||0!==e.length?P(t,i,e,!1):B(t,i)):P(t,i,e,!1)}else n||(i.reading=!1,B(t,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function P(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&M(t)),B(t,e)}function j(t,e){var r;return h(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],e)),r}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function t(){return void 0!==this._readableState&&this._readableState.destroyed},set:function t(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=u.from(t,e),e=""),n=!0),F(this,t,e,!1,n)},k.prototype.unshift=function(t){return F(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){return A||(A=r(42).StringDecoder),this._readableState.decoder=new A(t),this._readableState.encoding=this._readableState.decoder.encoding,this};var N=8388608;function U(t){return t>=N?t=N:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=U(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function L(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?M(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,D(t)))}}function M(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(D,t))}function D(t){var e=t._readableState;p("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||t.emit("readable"),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,z(t)}function B(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(q,t,e))}function q(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(p("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function H(t){return function e(){var r=t._readableState;p("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&o(t,"data")&&(r.flowing=!0,z(t))}}function $(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function W(t){p("readable nexttick read 0"),t.read(0)}function G(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(Y,t,e))}function Y(t,e){p("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),z(t),e.flowing&&!e.reading&&t.read(0)}function z(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function K(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function V(t){var e=t._readableState;p("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(J,e,t))}function J(t,e){p("endReadableNT",t.endEmitted,t.length),t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function X(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}k.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?V(this):M(this),null;if(t=I(t,e),0===t&&e.ended)return 0===e.length&&V(this),null;var n=e.needReadable,s;return p("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,p("length less than watermark",n)),e.ended||e.reading?(n=!1,p("reading or ended",n)):n&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(r,e))),s=t>0?K(t,e):null,null===s?(e.needReadable=!0,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&V(this)),null!==s&&this.emit("data",s),s},k.prototype._read=function(t){this.emit("error",new _("_read()"))},k.prototype.pipe=function(t,e){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,p("pipe count=%d opts=%j",s.pipesCount,e);var i=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr,a=i?c:m;function u(t,e){p("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function c(){p("onend"),t.end()}s.endEmitted?n.nextTick(a):r.once("end",a),t.on("unpipe",u);var l=H(r);t.on("drain",l);var h=!1;function f(){p("cleanup"),t.removeListener("close",y),t.removeListener("finish",w),t.removeListener("drain",l),t.removeListener("error",g),t.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",d),h=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||l()}function d(e){p("ondata");var n=t.write(e);p("dest.write",n),!1===n&&((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==X(s.pipes,t))&&!h&&(p("false write response, pause",s.awaitDrain),s.awaitDrain++),r.pause())}function g(e){p("onerror",e),m(),t.removeListener("error",g),0===o(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",w),m()}function w(){p("onfinish"),t.removeListener("close",y),m()}function m(){p("unpipe"),r.unpipe(t)}return r.on("data",d),x(t,"error",g),t.once("close",y),t.once("finish",w),t.emit("pipe",r),s.flowing||(p("pipe resume"),r.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<s;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=X(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},k.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),s=this._readableState;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,p("on readable",s.length,s.reading),s.length?M(this):s.reading||n.nextTick(W,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick($,this),r},k.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick($,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!t.readableListening,G(this,t)),t.paused=!1,this},k.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var s in t.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(s){if(p("wrapped data"),r.decoder&&(s=r.decoder.write(s)),(!r.objectMode||null!==s&&void 0!==s)&&(r.objectMode||s&&s.length)){var i=e.push(s);i||(n=!0,t.pause())}}),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function e(r){return function e(){return t[r].apply(t,arguments)}}(s));for(var i=0;i<C.length;i++)t.on(C[i],this.emit.bind(this,C[i]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return S("Readable[Symbol.asyncIterator]"),void 0===R&&(R=r(102)),R(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function t(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function t(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function t(){return this._readableState.flowing},set:function t(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=K,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function t(){return this._readableState.length}})}).call(this,r(5),r(3))},function(t,e,r){"use strict";var n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function t(e,r,n){return Function.prototype.apply.call(e,r,n)},i;function o(t){console&&console.warn&&console.warn(t)}i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function t(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function t(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function t(e){return e!=e};function u(){u.init.call(this)}t.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function l(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var s,i,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(i=t._events,void 0===i?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]),void 0===a)a=i[e]=r,++t._eventsCount;else if("function"==typeof a?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),s=l(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,o(u)}return t}function f(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,t))}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=f.bind(n);return s.listener=r,n.wrapFn=s,s}function d(t,e,r){var n=t._events;if(void 0===n)return[];var s=n[e];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?m(s):y(s,s.length)}function g(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function w(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function m(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function t(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function t(){return l(this)},u.prototype.emit=function t(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,r);else for(var l=c.length,h=y(c,l),n=0;n<l;++n)s(h[n],this,r);return!0},u.prototype.addListener=function t(e,r){return h(this,e,r,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function t(e,r){return h(this,e,r,!0)},u.prototype.once=function t(e,r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);return this.on(e,p(this,e,r)),this},u.prototype.prependOnceListener=function t(e,r){if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);return this.prependListener(e,p(this,e,r)),this},u.prototype.removeListener=function t(e,r){var n,s,i,o,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(s=this._events,void 0===s)return this;if(n=s[e],void 0===n)return this;if(n===r||n.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():w(n,i),1===n.length&&(s[e]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",e,a||r)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function t(e){var r,n,s;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],"function"==typeof r)this.removeListener(e,r);else if(void 0!==r)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this},u.prototype.listeners=function t(e){return d(this,e,!0)},u.prototype.rawListeners=function t(e){return d(this,e,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},u.prototype.listenerCount=g,u.prototype.eventNames=function t(){return this._eventsCount>0?i(this._events):[]}},function(t,e,r){t.exports=r(37).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,r){var i=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(r?r(t):!t||this._writableState&&this._writableState.errorEmitted||e.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!r&&t?(e.nextTick(n,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):r?(e.nextTick(s,i),r(t)):e.nextTick(s,i)}),this)}function n(t,e){o(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}t.exports={destroy:r,undestroy:i}}).call(this,r(3))},function(t,e,r){"use strict";var n=r(9).codes.ERR_INVALID_OPT_VALUE;function s(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}function i(t,e,r,i){var o=s(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0){var a=i?r:"highWaterMark";throw new n(a,o)}return Math.floor(o)}return t.objectMode?16:16384}t.exports={getHighWaterMark:i}},function(t,e,r){"use strict";(function(e,n){function s(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){G(e,t)}}var o;t.exports=x,x.WritableState=C;var a={deprecate:r(100)},u=r(38),c=r(7).Buffer,l=e.Uint8Array||function(){};function h(t){return c.from(t)}function f(t){return c.isBuffer(t)||t instanceof l}var p=r(39),d=r(40),g=d.getHighWaterMark,y=r(9).codes,w=y.ERR_INVALID_ARG_TYPE,m=y.ERR_METHOD_NOT_IMPLEMENTED,b=y.ERR_MULTIPLE_CALLBACK,v=y.ERR_STREAM_CANNOT_PIPE,_=y.ERR_STREAM_DESTROYED,T=y.ERR_STREAM_NULL_VALUES,E=y.ERR_STREAM_WRITE_AFTER_END,S=y.ERR_UNKNOWN_ENCODING,A;function R(){}function C(t,e,n){o=o||r(10),t=t||{},"boolean"!=typeof n&&(n=e instanceof o),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=g(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){I(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(t){o=o||r(10);var e=this instanceof o;if(!e&&!A.call(x,this))return new x(t);this._writableState=new C(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function O(t,e){var r=new E;t.emit("error",r),n.nextTick(e,r)}function k(t,e,r,s){var i;return null===r?i=new T:"string"==typeof r||e.objectMode||(i=new w("chunk",["string","Buffer"],r)),!i||(t.emit("error",i),n.nextTick(s,i),!1)}function F(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,r)),e}function P(t,e,r,n,s,i){if(!r){var o=F(e,n,s);n!==o&&(r=!0,s="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:s,isBuf:r,callback:i,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else j(t,e,!1,a,n,s,i);return u}function j(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function N(t,e,r,s,i){--e.pendingcb,r?(n.nextTick(i,s),n.nextTick($,t,e),t._writableState.errorEmitted=!0,t.emit("error",s)):(i(s),t._writableState.errorEmitted=!0,t.emit("error",s),$(t,e))}function U(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function I(t,e){var r=t._writableState,s=r.sync,i=r.writecb;if("function"!=typeof i)throw new b;if(U(r),e)N(t,r,s,e,i);else{var o=B(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||D(t,r),s?n.nextTick(L,t,r,o,i):L(t,r,o,i)}}function L(t,e,r,n){r||M(t,e),e.pendingcb--,n(),$(t,e)}function M(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function D(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)s[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;s.allBuffers=u,j(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback,f=e.objectMode?1:c.length;if(j(t,e,!1,f,c,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function B(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function q(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),$(t,e)})}function H(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(q,t,e)))}function $(t,e){var r=B(e);return r&&(H(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}function W(t,e,r){e.ending=!0,$(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function G(t,e,r){var n=t.entry;for(t.entry=null;n;){var s=n.callback;e.pendingcb--,s(r),n=n.next}e.corkedRequestsFree.next=t}r(11)(x,u),C.prototype.getBuffer=function t(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r},function(){try{Object.defineProperty(C.prototype,"buffer",{get:a.deprecate(function t(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function t(e){return!!A.call(this,e)||this===x&&(e&&e._writableState instanceof C)}})):A=function t(e){return e instanceof this},x.prototype.pipe=function(){this.emit("error",new v)},x.prototype.write=function(t,e,r){var n=this._writableState,s=!1,i=!n.objectMode&&f(t);return i&&!c.isBuffer(t)&&(t=h(t)),"function"==typeof e&&(r=e,e=null),i?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=R),n.ending?O(this,r):(i||k(this,n,t,r))&&(n.pendingcb++,s=P(this,n,i,t,e,r)),s},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||D(this,t))},x.prototype.setDefaultEncoding=function t(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function t(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function t(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,r){r(new m("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||W(this,n,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function t(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function t(){return void 0!==this._writableState&&this._writableState.destroyed},set:function t(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(t,e){e(t)}}).call(this,r(5),r(3))},function(t,e,r){"use strict";var n=r(101).Buffer,s=n.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function o(t){var e=i(t);if("string"!=typeof e&&(n.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t}function a(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=d,this.end=g,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=y,this.end=w,e=3;break;default:return this.write=m,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function u(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function c(t,e,r){var n=e.length-1;if(n<r)return 0;var s=u(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||-2===s?0:(s=u(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||-2===s?0:(s=u(e[n]),s>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0))}function l(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function h(t){var e=this.lastTotal-this.lastNeed,r=l(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function f(t,e){var r=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function d(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function g(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function y(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function w(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function b(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},a.prototype.end=p,a.prototype.text=f,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";t.exports=l;var n=r(9).codes,s=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(10);function c(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(e,r){f(t,e,r)})}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}r(11)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new s("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,function(t){e(t)})}},function(t,e,r){const n=r(4);r(95),r(105),r(106),r(107),r(109),r(110),r(111),r(112),"undefined"!=typeof window&&(window.DwebTransports=n),e=t.exports=n},function(t,e,r){(function(t,n){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){var o=e&&!e.nodeType&&e,a=t&&!t.nodeType&&t,u="object"==typeof n&&n;u.global!==u&&u.window!==u&&u.self!==u||(i=u);var c,l=2147483647,h=36,f=1,p=26,d=38,g=700,y=72,w=128,m="-",b=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=h-f,S=Math.floor,A=String.fromCharCode,R;function C(t){throw new RangeError(T[t])}function x(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function O(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(_,".");var s=t.split("."),i=x(s,e).join(".");return n+i}function k(t){for(var e=[],r=0,n=t.length,s,i;r<n;)s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<n?(i=t.charCodeAt(r++),56320==(64512&i)?e.push(((1023&s)<<10)+(1023&i)+65536):(e.push(s),r--)):e.push(s);return e}function F(t){return x(t,function(t){var e="";return t>65535&&(t-=65536,e+=A(t>>>10&1023|55296),t=56320|1023&t),e+=A(t),e}).join("")}function P(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:h}function j(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function N(t,e,r){var n=0;for(t=r?S(t/g):t>>1,t+=S(t/e);t>E*p>>1;n+=h)t=S(t/E);return S(n+(E+1)*t/(t+d))}function U(t){var e=[],r=t.length,n,s=0,i=w,o=y,a,u,c,d,g,b,v,_,T;for(a=t.lastIndexOf(m),a<0&&(a=0),u=0;u<a;++u)t.charCodeAt(u)>=128&&C("not-basic"),e.push(t.charCodeAt(u));for(c=a>0?a+1:0;c<r;){for(d=s,g=1,b=h;c>=r&&C("invalid-input"),v=P(t.charCodeAt(c++)),(v>=h||v>S((l-s)/g))&&C("overflow"),s+=v*g,_=b<=o?f:b>=o+p?p:b-o,!(v<_);b+=h)T=h-_,g>S(l/T)&&C("overflow"),g*=T;n=e.length+1,o=N(s-d,n,0==d),S(s/n)>l-i&&C("overflow"),i+=S(s/n),s%=n,e.splice(s++,0,i)}return F(e)}function I(t){var e,r,n,s,i,o,a,u,c,d,g,b=[],v,_,T,E;for(t=k(t),v=t.length,e=w,r=0,i=y,o=0;o<v;++o)g=t[o],g<128&&b.push(A(g));for(n=s=b.length,s&&b.push(m);n<v;){for(a=l,o=0;o<v;++o)g=t[o],g>=e&&g<a&&(a=g);for(_=n+1,a-e>S((l-r)/_)&&C("overflow"),r+=(a-e)*_,e=a,o=0;o<v;++o)if(g=t[o],g<e&&++r>l&&C("overflow"),g==e){for(u=r,c=h;d=c<=i?f:c>=i+p?p:c-i,!(u<d);c+=h)E=u-d,T=h-d,b.push(A(j(d+E%T,0))),u=S(E/T);b.push(A(j(u,0))),i=N(r,_,n==s),r=0,++n}++r,++e}return b.join("")}function L(t){return O(t,function(t){return b.test(t)?U(t.slice(4).toLowerCase()):t})}function M(t){return O(t,function(t){return v.test(t)?"xn--"+I(t):t})}c={version:"1.4.1",ucs2:{decode:k,encode:F},decode:U,encode:I,toASCII:M,toUnicode:L},s=function(){return c}.call(e,r,e,t),void 0===s||(t.exports=s)}(this)}).call(this,r(17)(t),r(5))},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(48),e.encode=e.stringify=r(49)},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h=t[l].replace(a,"%20"),f=h.indexOf(r),p,d,g,y;f>=0?(p=h.substr(0,f),d=h.substr(f+1)):(p=h,d=""),g=decodeURIComponent(p),y=decodeURIComponent(d),n(o,g)?s(o[g])?o[g].push(y):o[g]=[o[g],y]:o[g]=y}return o};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(o(t),function(o){var a=encodeURIComponent(n(o))+r;return s(t[o])?i(t[o],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[o]))}).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){function n(t){function e(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let r;function o(...t){if(!o.enabled)return;const e=o,s=Number(new Date),i=s-(r||s);e.diff=i,e.prev=r,e.curr=s,r=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return r;a++;const i=n.formatters[s];if("function"==typeof i){const n=t[a];r=i.call(e,n),t.splice(a,1),a--}return r}),n.formatArgs.call(e,t);const u=e.log||n.log;u.apply(e,t)}return o.namespace=t,o.enabled=n.enabled(t),o.useColors=n.useColors(),o.color=e(t),o.destroy=s,o.extend=i,"function"==typeof n.init&&n.init(o),n.instances.push(o),o}function s(){const t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function i(t,e){const r=n(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function o(t){let e;n.save(t),n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),s=r.length;for(e=0;e<s;e++)r[e]&&(t=r[e].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){const t=n.instances[e];t.enabled=n.enabled(t.namespace)}}function a(){const t=[...n.names.map(c),...n.skips.map(c).map(t=>"-"+t)].join(",");return n.enable(""),t}function u(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function c(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function l(t){return t instanceof Error?t.stack||t.message:t}return n.debug=n,n.default=n,n.coerce=l,n.disable=a,n.enable=o,n.enabled=u,n.humanize=r(51),Object.keys(t).forEach(e=>{n[e]=t[e]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n}t.exports=n},function(t,e){var r=1e3,n=60*r,s=60*n,i=24*s,o=7*i,a=365.25*i;function u(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var u=parseFloat(e[1]),c=(e[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*s;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function c(t){var e=Math.abs(t);return e>=i?Math.round(t/i)+"d":e>=s?Math.round(t/s)+"h":e>=n?Math.round(t/n)+"m":e>=r?Math.round(t/r)+"s":t+"ms"}function l(t){var e=Math.abs(t);return e>=i?h(t,e,i,"day"):e>=s?h(t,e,s,"hour"):e>=n?h(t,e,n,"minute"):e>=r?h(t,e,r,"second"):t+" ms"}function h(t,e,r,n){var s=e>=1.5*r;return Math.round(t/r)+" "+n+(s?"s":"")}t.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return u(t);if("number"===r&&isFinite(t))return e.long?l(t):c(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){"use strict";e.byteLength=l,e.toByteArray=f,e.fromByteArray=g;for(var n=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],s[o.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function l(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function h(t,e,r){return 3*(e+r)/4-r}function f(t){var e,r=c(t),n=r[0],o=r[1],a=new i(h(t,n,o)),u=0,l=o>0?n-4:n,f;for(f=0;f<l;f+=4)e=s[t.charCodeAt(f)]<<18|s[t.charCodeAt(f+1)]<<12|s[t.charCodeAt(f+2)]<<6|s[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===o&&(e=s[t.charCodeAt(f)]<<2|s[t.charCodeAt(f+1)]>>4,a[u++]=255&e),1===o&&(e=s[t.charCodeAt(f)]<<10|s[t.charCodeAt(f+1)]<<4|s[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a}function p(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function d(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),s.push(p(n));return s.join("")}function g(t){for(var e,r=t.length,s=r%3,i=[],o=16383,a=0,u=r-s;a<u;a+=16383)i.push(d(t,a,a+16383>u?u:a+16383));return 1===s?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,s){var i,o,a=8*s-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?s-1:0,f=r?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+t[e+h],h+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+t[e+h],h+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),i-=c}return(p?-1:1)*o*Math.pow(2,i-n)},e.write=function(t,e,r,n,s,i){var o,a,u,c=8*i-s-1,l=(1<<c)-1,h=l>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*u-1)*Math.pow(2,s),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[r+p]=255&a,p+=d,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+p]=255&o,p+=d,o/=256,c-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=(0,o.default)(t);return(0,s.default)(function(t,e){r(t[0],e)},e,1)};var n=r(57),s=a(n),i=r(8),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var n=r(58),s=w(n),i=r(24),o=w(i),a=r(15),u=w(a),c=r(18),l=w(c),h=r(25),f=w(h),p=r(62),d=w(p),g=r(8),y=w(g);function w(t){return t&&t.__esModule?t:{default:t}}function m(t,e,r){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=(0,y.default)(t),i=0,a=[],c=!1;function h(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(w.started=!0,(0,o.default)(t)||(t=[t]),0===t.length&&w.idle())return(0,f.default)(function(){w.drain()});for(var n=0,s=t.length;n<s;n++){var i={data:t[n],callback:r||u.default};e?w._tasks.unshift(i):w._tasks.push(i)}c||(c=!0,(0,f.default)(function(){c=!1,w.process()}))}function p(t){return function(e){i-=1;for(var r=0,n=t.length;r<n;r++){var o=t[r],u=(0,s.default)(a,o,0);0===u?a.shift():u>0&&a.splice(u,1),o.callback.apply(o,arguments),null!=e&&w.error(e,o.data)}i<=w.concurrency-w.buffer&&w.unsaturated(),w.idle()&&w.drain(),w.process()}}var g=!1,w={_tasks:new d.default,concurrency:e,payload:r,saturated:u.default,unsaturated:u.default,buffer:e/4,empty:u.default,drain:u.default,error:u.default,started:!1,paused:!1,push:function(t,e){h(t,!1,e)},kill:function(){w.drain=u.default,w._tasks.empty()},unshift:function(t,e){h(t,!0,e)},remove:function(t){w._tasks.remove(t)},process:function(){if(!g){for(g=!0;!w.paused&&i<w.concurrency&&w._tasks.length;){var t=[],e=[],r=w._tasks.length;w.payload&&(r=Math.min(r,w.payload));for(var s=0;s<r;s++){var o=w._tasks.shift();t.push(o),a.push(o),e.push(o.data)}i+=1,0===w._tasks.length&&w.empty(),i===w.concurrency&&w.saturated();var u=(0,l.default)(p(t));n(e,u)}g=!1}},length:function(){return w._tasks.length},running:function(){return i},workersList:function(){return a},idle:function(){return w._tasks.length+i===0},pause:function(){w.paused=!0},resume:function(){!1!==w.paused&&(w.paused=!1,(0,f.default)(w.process))}};return w}t.exports=e.default},function(t,e,r){var n=r(59),s=r(60),i=r(61);function o(t,e,r){return e==e?i(t,e,r):n(t,s,r)}t.exports=o},function(t,e){function r(t,e,r,n){for(var s=t.length,i=r+(n?1:-1);n?i--:++i<s;)if(e(t[i],i,t))return i;return-1}t.exports=r},function(t,e){function r(t){return t!=t}t.exports=r},function(t,e){function r(t,e,r){for(var n=r-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}t.exports=r},function(t,e,r){"use strict";function n(){this.head=this.tail=null,this.length=0}function s(t,e){t.length=1,t.head=t.tail=e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,n.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},n.prototype.empty=function(){for(;this.head;)this.shift();return this},n.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},n.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},n.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):s(this,t)},n.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):s(this,t)},n.prototype.shift=function(){return this.head&&this.removeLink(this.head)},n.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},n.prototype.toArray=function(){for(var t=Array(this.length),e=this.head,r=0;r<this.length;r++)t[r]=e.data,e=e.next;return t},n.prototype.remove=function(t){for(var e=this.head;e;){var r=e.next;t(e)&&this.removeLink(e),e=r}return this},t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=r(27),s=c(n),i=r(64),o=c(i),a=r(25),u=c(a);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return(0,o.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(t){return r(t)}(0,s.default)(n)&&"function"==typeof n.then?n.then(function(t){h(r,null,t)},function(t){h(r,t.message?t:new Error(t))}):r(null,n)})}function h(t,e,r){try{t(e,r)}catch(t){(0,u.default)(f,t)}}function f(t){throw t}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=(0,s.default)(arguments),r=e.pop();t.call(this,e,r)}};var n=r(26),s=i(n);function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=r(28),s=c(n),i=r(90),o=c(i),a=r(8),u=c(a);function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e,r){(0,s.default)(t,(0,o.default)((0,u.default)(e)),r)}t.exports=e.default},function(t,e,r){var n=r(20),s=r(27),i="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";function c(t){if(!s(t))return!1;var e=n(t);return e==o||e==a||e==i||e==u}t.exports=c},function(t,e,r){var n=r(29),s=Object.prototype,i=s.hasOwnProperty,o=s.toString,a=n?n.toStringTag:void 0;function u(t){var e=i.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var s=o.call(t);return n&&(e?t[a]=r:delete t[a]),s}t.exports=u},function(t,e){var r=Object.prototype,n=r.toString;function s(t){return n.call(t)}t.exports=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=r(70),s=a(n),i=r(8),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r,n){(0,s.default)(e)(t,(0,o.default)(r),n)}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=r(15),s=p(n),i=r(34),o=p(i),a=r(71),u=p(a),c=r(18),l=p(c),h=r(33),f=p(h);function p(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(e,r,n){if(n=(0,o.default)(n||s.default),t<=0||!e)return n(null);var i=(0,u.default)(e),a=!1,c=0,h=!1;function p(t,e){if(c-=1,t)a=!0,n(t);else{if(e===f.default||a&&c<=0)return a=!0,n(null);h||d()}}function d(){for(h=!0;c<t&&!a;){var e=i();if(null===e)return a=!0,void(c<=0&&n(null));c+=1,r(e.value,e.key,(0,l.default)(p))}h=!1}d()}}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var n=r(19),s=c(n),i=r(72),o=c(i),a=r(73),u=c(a);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=-1,r=t.length;return function n(){return++e<r?{value:t[e],key:e}:null}}function h(t){var e=-1;return function r(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function f(t){var e=(0,u.default)(t),r=-1,n=e.length;return function s(){var i=e[++r];return r<n?{value:t[i],key:i}:null}}function p(t){if((0,s.default)(t))return l(t);var e=(0,o.default)(t);return e?h(e):f(t)}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return n&&t[n]&&t[n]()};var n="function"==typeof Symbol&&Symbol.iterator;t.exports=e.default},function(t,e,r){var n=r(74),s=r(85),i=r(19);function o(t){return i(t)?n(t):s(t)}t.exports=o},function(t,e,r){var n=r(75),s=r(76),i=r(24),o=r(78),a=r(80),u=r(81),c=Object.prototype,l=c.hasOwnProperty;function h(t,e){var r=i(t),c=!r&&s(t),h=!r&&!c&&o(t),f=!r&&!c&&!h&&u(t),p=r||c||h||f,d=p?n(t.length,String):[],g=d.length;for(var y in t)!e&&!l.call(t,y)||p&&("length"==y||h&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,g))||d.push(y);return d}t.exports=h},function(t,e){function r(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}t.exports=r},function(t,e,r){var n=r(77),s=r(21),i=Object.prototype,o=i.hasOwnProperty,a=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return s(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,r){var n=r(20),s=r(21),i="[object Arguments]";function o(t){return s(t)&&n(t)==i}t.exports=o},function(t,e,r){(function(t){var n=r(30),s=r(79),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,u=a?n.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||s;t.exports=l}).call(this,r(17)(t))},function(t,e){function r(){return!1}t.exports=r},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function s(t,e){var s=typeof t;return e=null==e?r:e,!!e&&("number"==s||"symbol"!=s&&n.test(t))&&t>-1&&t%1==0&&t<e}t.exports=s},function(t,e,r){var n=r(82),s=r(83),i=r(84),o=i&&i.isTypedArray,a=o?s(o):n;t.exports=a},function(t,e,r){var n=r(20),s=r(32),i=r(21),o="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",h="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",g="[object RegExp]",y="[object Set]",w="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",R="[object Uint8Array]",C="[object Uint8ClampedArray]",x="[object Uint16Array]",O="[object Uint32Array]",k={};function F(t){return i(t)&&s(t.length)&&!!k[n(t)]}k[_]=k[T]=k[E]=k[S]=k[A]=k[R]=k[C]=k[x]=k[O]=!0,k[o]=k[a]=k[b]=k[u]=k[v]=k[c]=k[l]=k[h]=k[f]=k[p]=k[d]=k[g]=k[y]=k[w]=k[m]=!1,t.exports=F},function(t,e){function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,r){(function(t){var n=r(31),s=e&&!e.nodeType&&e,i=s&&"object"==typeof t&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o&&n.process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(this,r(17)(t))},function(t,e,r){var n=r(86),s=r(87),i=Object.prototype,o=i.hasOwnProperty;function a(t){if(!n(t))return s(t);var e=[];for(var r in Object(t))o.call(t,r)&&"constructor"!=r&&e.push(r);return e}t.exports=a},function(t,e){var r=Object.prototype;function n(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||r;return t===n}t.exports=n},function(t,e,r){var n=r(88),s=n(Object.keys,Object);t.exports=s},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e,r){"use strict";function n(t,e){return function(r,n,s){return t(r,e,n,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t){return function(e,r,n){return t(e,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(92),s=a(n),i=r(93),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}e.default=(0,s.default)(o.default),t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=r(28),s=a(n),i=r(8),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(e,r,n){return t(s.default,e,(0,o.default)(r),n)}}t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=r(15),s=a(n),i=r(8),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r,n){n=n||s.default,e=e||[];var i=[],a=0,u=(0,o.default)(r);t(e,function(t,e,r){var n=a++;u(t,function(t,e){i[n]=e,r(t)})},function(t){n(t,i)})}t.exports=e.default},function(t,e,r){const n=r(0)("dweb-transports:naming"),s={".":["https://archive.org/"],advancedsearch:["https://dweb.archive.org/advancedsearch"],contenthash:["https://dweb.archive.org/contenthash/"],details:["https://dweb.archive.org/archive/archive.html?item="],download:["https://cors.archive.org/download/"],examples:["https://dweb.archive.org/archive/examples/"],images:["https://dweb.archive.org/archive/images/"],serve:["https://cors.archive.org/download/"],archive:["https://dweb.archive.org/archive/"],services:{img:["https://archive.org/services/img/"]},thumbnail:["https://archive.org/services/img/"],metadata:["wolk://dweb.archive.org/metadata/","gun:/gun/arc/archive.org/metadata/","https://www-dweb-metadata.dev.archive.org/metadata/"],mds:["https://be-api.us.archive.org/mds/"],"search.php":["https://dweb.archive.org/archive/archive.html?query="],search:["https://dweb.archive.org/archive/archive.html?query="]},i=["https://archive.org","https://dweb.archive.org","https://www-dweb-metadata.dev.archive.org","https://be-api.us.archive.org"],o={"dweb:/":{arc:{"archive.org":s},ipfs:["http://ipfs.io/ipfs/","https://dweb.me/ipfs/"]},"https://archive.org/":s,"http://archive.org/":s,"https://dweb.archive.org/":s,"https://be-api.us.archive.org/":s};function a(t,e,r){const n=t+e.join("/");return r?[n,r].join(n.includes("?")?"&":"?"):n}function u(t,e,r){const s=r.shift();let i=e[s];return i||r.unshift(s),!i&&e["."]&&(i=e["."]),i||n("WARNING unable to resolve %s in %s",s,t),"object"!=typeof i||Array.isArray(i)?[i,r]:u(t+s+"/",i,r)}function c(t,e,r){const[n,s]=r.split("?"),[i,o]=u(t,e,n.split("/"));return Array.isArray(i)?i.map(t=>a(t,o,s)).filter(t=>!!t):[a(i,o,s)]}function l(t){const e=Object.keys(o).find(e=>t.startsWith(e));return e?c(e,o[e],t.slice(e.length)):t}function h(t){return[].concat(...t.map(t=>l(t)))}async function f(t){return new Promise((e,r)=>{try{const n=h(t);e(n)}catch(t){r(t)}})}e=t.exports={naming:h,p_namingcb:f,archiveOrgMirroredUrls:i}},function(t,e,r){const n=r(6),s=r(4),i=r(14),o=r(1),a=r(35),u=r(0)("dweb-transports:http");defaulthttpoptions={urlbase:"https://dweb.me",heartbeat:{delay:3e4}};class c extends n{constructor(t){super(t),this.options=t,this.urlbase=t.urlbase,this.supportURLs=["http","https"],this.supportFunctions=["fetch"],this.supportFeatures=["noCache"],"undefined"==typeof window&&this.supportFunctions.push("createReadStream"),this.supportFeatures=["fetch.range","noCache"],this.name="HTTP",this.status=n.STATUS_LOADED}static setup0(t){let e=n.mergeoptions(defaulthttpoptions,t.http);try{let t=new c(e);return s.addtransport(t),t}catch(t){throw u("ERROR: HTTP unable to setup0",t.message),t}}p_setup1(t){return new Promise((e,r)=>{this.status=n.STATUS_STARTING,t&&t(this),this.updateStatus((r,n)=>{t&&t(this),this.startHeartbeat(this.options.heartbeat),e(this)})})}async p_status(t){if(!t)return new Promise((t,e)=>{try{this.updateStatus((r,n)=>{r?e(r):t(n)})}catch(t){e(t)}});try{this.updateStatus(t)}catch(e){t(e)}}updateStatus(t){this.updateInfo({silentFinalError:!0},(e,r)=>{e?(u("Error status call to info failed %s",e.message),this.status=n.STATUS_FAILED,t(null,this.status)):(this.info=r,this.status=n.STATUS_CONNECTED,t(null,this.status))})}startHeartbeat({delay:t,statusCB:e}){t&&(u("%s Starting Heartbeat",this.name),this.heartbeatTimer=setInterval(()=>{this.updateStatus((t,r)=>{e&&e(this)},(t,e)=>{})},t))}stopHeartbeat(){this.heartbeatTimer&&(u("stopping heartbeat"),clearInterval(this.heartbeatTimer))}stop(t,e){this.stopHeartbeat(),this.status=n.STATUS_FAILED,t&&t(this),e(null,this)}validFor(t,e,r){return(this.connected()||t.protocol.startsWith("http")&&!t.href.startsWith(this.urlbase))&&this.supports(t,e,r)}async p_rawfetch(t,e={}){return await i.p_GET(t,e)}async p_f_createReadStream(t,{wanturl:e=!1}={}){try{let r=this;return e?t:function(e){return r.createReadStream(t,e)}}catch(t){throw t}}createReadStream(t,e){let r;return u("createreadstream %s %o",o.parse(t).href,e),r=new a.PassThrough,i.p_GET(t,Object.assign({wantstream:!0},Object.assign({},e,{silentFinalError:!0}))).then(t=>{t.pipe(r)}).catch(t=>{e.silentFinalError||u("ERROR: %s createReadStream caught error",this.name,t.message),"function"==typeof r.destroy?r.destroy(t):r.emit("error",t)}),r}async p_createReadStream(t,e){u("createreadstream %s %o",o.parse(t).href,e);try{return await i.p_GET(t,Object.assign({wantstream:!0},e))}catch(t){throw console.warn(this.name,"caught error",t),t}}async p_info(){return new Promise((t,e)=>{try{this.updateInfo({},(r,n)=>{r?e(r):t(n)})}catch(t){e(t)}})}updateInfo(t={},e){"function"==typeof t&&(e=t,t={}),i.p_GET(`${this.urlbase}/info`,Object.assign({retries:1,silentFinalError:!1},t),e)}static async p_test(t={}){console.log("TransportHTTP.test");try{let e=await this.p_setup(t);console.log("HTTP connected");let r=await e.p_info();console.log("TransportHTTP info=",r),r=await e.p_status(),console.assert(r===n.STATUS_CONNECTED),await e.p_test_kvt("NACL%20VERIFY")}catch(t){throw console.log("Exception thrown in TransportHTTP.test:",t.message),t}}static async test(){return this}}s._transportclasses.HTTP=c,c.requires=c.scripts=[],e=t.exports=c},function(t,e){},function(t,e,r){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){s(t,e,r[e])})}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(7),o=i.Buffer,a=r(98),u=a.inspect,c=u&&u.custom||"inspect";function l(t,e,r){o.prototype.copy.call(t,e,r)}t.exports=function(){function t(){this.head=null,this.tail=null,this.length=0}var e=t.prototype;return e.push=function t(e){var r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},e.unshift=function t(e){var r={data:e,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length},e.shift=function t(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.clear=function t(){this.head=this.tail=null,this.length=0},e.join=function t(e){if(0===this.length)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=e+r.data;return n},e.concat=function t(e){if(0===this.length)return o.alloc(0);for(var r=o.allocUnsafe(e>>>0),n=this.head,s=0;n;)l(n.data,r,s),s+=n.data.length,n=n.next;return r},e.consume=function t(e,r){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():r?this._getString(e):this._getBuffer(e),n},e.first=function t(){return this.head.data},e._getString=function t(e){var r=this.head,n=1,s=r.data;for(e-=s.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(o===i.length?s+=i:s+=i.slice(0,e),e-=o,0===e){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,s},e._getBuffer=function t(e){var r=o.allocUnsafe(e),n=this.head,s=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,a),e-=a,0===e){a===i.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(a));break}++s}return this.length-=s,r},e[c]=function(t,e){return u(this,n({},e,{depth:0,customInspect:!1}))},t}()},function(t,e){},function(t,e,r){"use strict";(function(e){var r=new Set;function n(t){if(!r.has(t)){var n=t+" is an experimental feature. This feature could change at any time";r.add(t),e.emitWarning(n,"ExperimentalWarning")}}function s(){}t.exports.emitExperimentalWarning=e.emitWarning?n:s}).call(this,r(3))},function(t,e,r){(function(e){function r(t,e){if(n("noDeprecation"))return t;var r=!1;function s(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return s}function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,r(5))},function(t,e,r){var n=r(7),s=n.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return s(t,e,r)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o),o.prototype=Object.create(s.prototype),i(s,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";(function(e){var n;function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(22),o=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[o];if(null!==e){var r=t[f].read();null!==r&&(t[l]=null,t[o]=null,t[a]=null,e(p(r,!1)))}}function g(t){e.nextTick(d,t)}function y(t,e){return function(r,n){t.then(function(){e[c]?r(p(void 0,!0)):e[h](r,n)},n)}}var w=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((n={get stream(){return this[f]},next:function t(){var r=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(t,n){e.nextTick(function(){r[u]?n(r[u]):t(p(void 0,!0))})});var s=this[l],i;if(s)i=new Promise(y(s,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));i=new Promise(this[h])}return this[l]=i,i}},s(n,Symbol.asyncIterator,function(){return this}),s(n,"return",function t(){var e=this;return new Promise(function(t,r){e[f].destroy(null,function(e){e?r(e):t(p(void 0,!0))})})}),n),w),b=function t(e){var r,n=Object.create(m,(r={},s(r,f,{value:e,writable:!0}),s(r,o,{value:null,writable:!0}),s(r,a,{value:null,writable:!0}),s(r,u,{value:null,writable:!0}),s(r,c,{value:e._readableState.endEmitted,writable:!0}),s(r,h,{value:function t(e,r){var s=n[f].read();s?(n[l]=null,n[o]=null,n[a]=null,e(p(s,!1))):(n[o]=e,n[a]=r)},writable:!0}),r));return n[l]=null,i(e,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[a];return null!==e&&(n[l]=null,n[o]=null,n[a]=null,e(t)),void(n[u]=t)}var r=n[o];null!==r&&(n[l]=null,n[o]=null,n[a]=null,r(p(void 0,!0))),n[c]=!0}),e.on("readable",g.bind(null,n)),n};t.exports=b}).call(this,r(3))},function(t,e,r){"use strict";t.exports=s;var n=r(43);function s(t){if(!(this instanceof s))return new s(t);n.call(this,t)}r(11)(s,n),s.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;function s(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var i=r(9).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function u(t){if(t)throw t}function c(t){return t.setHeader&&"function"==typeof t.abort}function l(t,e,i,o){o=s(o);var u=!1;t.on("close",function(){u=!0}),void 0===n&&(n=r(22)),n(t,{readable:e,writable:i},function(t){if(t)return o(t);u=!0,o()});var l=!1;return function(e){if(!u&&!l)return l=!0,c(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function h(t){t()}function f(t,e){return t.pipe(e)}function p(t){return t.length?"function"!=typeof t[t.length-1]?u:t.pop():u}function d(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=p(e),s;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var i=e.map(function(t,r){var o=r<e.length-1,a=r>0;return l(t,o,a,function(t){s||(s=t),t&&i.forEach(h),o||(i.forEach(h),n(s))})});return e.reduce(f)}t.exports=d},function(t,e,r){(function(n,s){const i=r(14),o=r(0)("dweb-transports:ipfs");let a;const u=r(1),c=r(2),l=r(6),h=r(4),f=r(13),p={repo:"/tmp/dweb_ipfsv3107",config:{Bootstrap:["/dns4/dweb.me/tcp/4245/wss/ipfs/QmQz3p44VVQDeAieaW28DMjcTVzLbpxqaQB9bkXnyd7HY5"]},EXPERIMENTAL:{pubsub:!0},preload:{enabled:!1}};class d extends l{constructor(t){super(t),["urlUrlstore","httpIPFSgateway"].forEach(e=>{this[e]=t[e],delete t[e]}),this.ipfs=void 0,this.options=t,this.name="IPFS",this.supportURLs=["ipfs"],this.supportFunctions=["fetch","store","seed","createReadStream"],this.supportFeatures=["noCache"],this.status=l.STATUS_LOADED}_ipfsversion(t,e,r){t.version((n,s)=>{n?(o("IPFS via %s present but unresponsive: %o",e,s),this.ipfstype="FAILED",r(n)):(o("IPFS available via %s: %o",e,s),this.ipfstype=e,r(null,t))})}IPFSAutoConnect(t){a=n.Ipfs||window.Ipfs;const e=n.IpfsHttpClient||window.IpfsHttpClient;if(n.ipfs)this._ipfsversion(n.ipfs,"global.ipfs",t);else if("undefined"!=typeof window&&window.ipfs)this._ipfsversion(window.ipfs,"window.ipfs",t);else try{var r=e("http://localhost:5001");r.version((e,n)=>{e?(o("IPFS via API failed %s, trying running own IPFS client",e.message),r=new a(this.options),r.on("ready",()=>{this._ipfsversion(r,"client",t)}),r.on("error",e=>{o("IPFS via client error %s",e.message),t(e)})):this._ipfsversion(r,"API",t)})}catch(e){o("IPFSAutoConnect failed with exception %o",e),t(e,null)}}static setup0(t){const e=l.mergeoptions(p,t.ipfs);o("setup options=%o",e);const r=new d(e);return h.addtransport(r),r}p_setup1(t,e){if(!e)return new Promise((t,e)=>{try{r.call(this,(r,n)=>{r?e(r):t(n)})}catch(t){e(t)}});try{r.call(this,e)}catch(t){e(t)}function r(e){try{this.status=l.STATUS_STARTING,t&&t(this),this.IPFSAutoConnect((r,n)=>{r?(o("Failed to connect %s",r.message),this.status=l.STATUS_FAILED):(this.ipfs=n,this.status=l.STATUS_CONNECTED),t&&t(this),e(null,this)})}catch(r){o("Exception in IPFS.setup1 %o",r),this.status=l.STATUS_FAILED,t&&t(this),e(null,this)}}}p_setup2(t){return this.status===l.STATUS_FAILED&&o("Stage 1 failed, skipping"),this}stop(t,e){"client"===this.ipfstype?this.ipfs.stop((r,n)=>{this.status=l.STATUS_FAILED,t&&t(this),e(r,n)}):(this.status=l.STATUS_FAILED,t&&t(this),e(miull,this))}async p_status(){return this.status=await this.ipfs.isOnline()?l.STATUS_CONNECTED:l.STATUS_FAILED,super.p_status()}static urlFrom(t){if(t instanceof a.CID)return"ipfs:/ipfs/"+t.toBaseEncodedString();if("object"==typeof t&&t.hash)return"ipfs:/ipfs/"+t.hash;if("string"==typeof t)return"ipfs:/ipfs/"+t;throw new c.CodingError("TransportIPFS.urlFrom: Cant convert to url from",t)}static cidFrom(t){if(t instanceof a.CID)return t;if("string"==typeof t&&(t=u.parse(t)),t&&t.pathname){const e=t.pathname.split("/");if(!["ipfs:","dweb:"].includes(t.protocol)||"ipfs"!==e[1]||e.length<3)throw new c.TransportError("TransportIPFS.cidFrom bad format for url should be dweb: or ipfs:/ipfs/...: "+t.href);if(e.length>3)throw new c.TransportError("TransportIPFS.cidFrom not supporting paths in url yet, should be dweb: or ipfs:/ipfs/...: "+t.href);return new a.CID(e[2])}throw new c.CodingError("TransportIPFS.cidFrom: Cant convert url",t)}static _stringFrom(t){return t instanceof a.CID?"/ipfs/"+t.toBaseEncodedString():"object"==typeof t&&t.path?t.path:void 0}static ipfsFrom(t){if(t=this._stringFrom(t),t.indexOf("/ipfs/")>-1)return t.slice(t.indexOf("/ipfs/"));throw new c.CodingError(`TransportIPFS.ipfsFrom: Cant convert url ${t} into a path starting /ipfs/`)}ipfsGatewayFrom(t){if(t=this._stringFrom(t),t.indexOf("/ipfs/")>-1)return this.httpIPFSgateway+t.slice(t.indexOf("/ipfs/"));throw new c.CodingError(`TransportIPFS.ipfsGatewayFrom: Cant convert url ${t} into a path starting /ipfs/`)}static multihashFrom(t){if(t instanceof a.CID)return t.toBaseEncodedString();if("object"==typeof t&&t.path&&(t=t.path),"string"==typeof t){const e=t.indexOf("/ipfs/");if(e>-1)return t.slice(e+6)}throw new c.CodingError(`Cant turn ${t} into a multihash`)}async p_rawfetch(t,{timeoutMS:e=6e4,unusedRelay:r=!1}={}){if(!t)throw new c.CodingError("TransportIPFS.p_rawfetch: requires url");const n=d.cidFrom(t),s=d.ipfsFrom(t);try{const r=await f.p_timeout(this.ipfs.dag.get(n),e,"Timed out IPFS fetch of "+d._stringFrom(n));if(r.remainderPath.length)throw new c.TransportError("Not yet supporting paths in p_rawfetch");let a;return"DAGNode"===r.value.constructor.name?a=await this.ipfs.cat(s):(o("Found a raw IPFS block (unusual) - not a DAGNode - handling as such"),a=r.value),a}catch(r){if(o("Caught error '%s' fetching via IPFS",r.message),!this.httpIPFSgateway)throw r;try{o("Trying IPFS HTTP gateway");let r=this.ipfsGatewayFrom(t);return await f.p_timeout(i.p_GET(r),e,"Timed out IPFS fetch of "+r)}catch(t){throw t}}}async p_rawstore(t){console.assert(t,"TransportIPFS.p_rawstore: requires data");const e=t instanceof s?t:new s(t),r=(await this.ipfs.add(e,{"cid-version":1,hashAlg:"sha2-256"}))[0];return d.urlFrom(r)}seed({directoryPath:t,fileRelativePath:e,ipfsHash:r,urlToFile:n},s){if(this.urlUrlstore&&n){const t=`${this.urlUrlstore}?arg=${encodeURIComponent(n)}`;i.p_GET(t,{retries:0},(t,e)=>{t?(o("IPFS.seed for %s failed in http: %s",n,t.message),s(t)):(o("Added %s to IPFS key=",n,e.Key),r&&r!==e.Key&&o("ipfs hash doesnt match expected metadata has %s daemon returned %s",r,e.Key),s(null,e))})}else o("IPFS.seed support requires urlUrlstore and urlToFile"),s(new Error("IPFS.seed support requires urlUrlstore and urlToFile"))}async p_f_createReadStream(t,{wanturl:e=!1}={}){let r;try{let n=t.pathname.split("/ipfs/")[1];if(n.includes("/"))throw new CodingError("Should not be seeing URLS with a path here:"+t);let s=this;return e?t:function t(e){o("reading from stream %o %o",n,e||"");const i=e?e.start:0,a=e&&e.end?i+e.end+1:void 0;return r&&r.destroy&&r.destroy(),r=s.ipfs.catReadableStream(n,{offset:i,length:a&&a-i}),r.on("error",t=>console.error(t)),r}}catch(t){throw r&&r.destroy&&r.destroy(),t}}static async p_test(t){console.log("TransportIPFS.test");try{const e=await this.p_setup(t);console.log(e.name,"setup");const r=await e.p_status();let n;console.assert(r===l.STATUS_CONNECTED);const s="The quick brown fox",i="ipfs:/ipfs/zdpuAscRnisRkYnEyJAp1LydQ3po25rCEDPPEDMymYRfN1yPK",o="1114",a=await e.p_rawstore(s);console.log("rawstore returned",a);const u=d.cidFrom(a);console.assert(a===i,"url should match url from rawstore");const c=a.split("/")[2],h=d.urlFrom(u);console.assert(a===h,"Should round trip"),n=a;const f=await e.p_rawfetch(n);return console.assert(f.toString()===s,"Should fetch block stored above"),e}catch(t){throw console.log("Exception thrown in TransportIPFS.test:",t.message),t}}}d.scripts=["ipfs/dist/index.min.js","ipfs-http-client/dist/index.min.js"],d.requires=["ipfs","ipfs-http-client"],h._transportclasses.IPFS=d,e=t.exports=d}).call(this,r(5),r(7).Buffer)},function(t,e,r){const n=r(1),s=r(0)("dweb-transports:yjs"),i=r(12);function o(t,e){return new Promise(r=>{setTimeout(()=>{r(e)},t)})}const a=r(2),u=r(6),c=r(4),l=r(13);let h={db:{name:"indexeddb"},connector:{name:"ipfs"}};class f extends u{constructor(t){super(t),this.options=t,this.name="YJS",this.supportURLs=["yjs"],this.supportFunctions=["fetch","add","list","listmonitor","newlisturls","connection","get","set","getall","keys","newdatabase","newtable","monitor"],this.supportFeatures=[],this.status=u.STATUS_LOADED}async p__y(t,e){"string"!=typeof t&&(t=t.href),console.assert(t.startsWith("yjs:/yjs/"));try{if(this.yarrays[t])return this.yarrays[t];{let r=u.mergeoptions(this.options,{connector:{room:t}},e);return this.yarrays[t]=await Y(r)}}catch(t){throw console.error("Failed to initialize Y",t.message),t}}async p__yarray(t){return this.p__y(t,{share:{array:"Array"}})}async p_connection(t){return this.p__y(t,{share:{map:"Map"}})}static setup0(t){let e=u.mergeoptions(h,t.yjs);s("YJS options %o",e);let r=new f(e);return c.addtransport(r),r}async p_setup2(t){try{this.status=u.STATUS_STARTING,t&&t(this),this.options.connector.ipfs=c.ipfs().ipfs,this.yarrays={},await this.p_status()}catch(t){console.error(this.name,"failed to start",t),this.status=u.STATUS_FAILED}return t&&t(this),this}async p_status(){return this.status=await this.options.connector.ipfs.isOnline()?u.STATUS_CONNECTED:u.STATUS_FAILED,super.p_status()}async p_rawlist(t){try{let e=await this.p__yarray(t),r=e.share.array.toArray();return r}catch(t){throw t}}listmonitor(t,e,{current:r=!1}={}){let n=this.yarrays["string"==typeof t?t:t.href];console.assert(n,"Should always exist before calling listmonitor - async call p__yarray(url) to create"),r&&n.share.array.toArray.map(e),n.share.array.observe(t=>{"insert"===t.type&&(s("resources inserted %o",t.values),t.values.map(e))})}rawreverse(){throw new a.ToBeImplementedError("Undefined function TransportYJS.rawreverse")}async p_rawadd(t,e){console.assert(t&&e.urls.length&&e.signature&&e.signedby.length,"TransportYJS.p_rawadd args",t,e);let r=e.preflight(Object.assign({},e)),n=await this.p__yarray(t);n.share.array.push([r])}p_newlisturls(t){let e=t._publicurls.map(t=>n.parse(t)).find(t=>"ipfs"===t.protocol&&t.pathname.includes("/ipfs/")||"yjs:"===t.protocol);return e||(e=`yjs:/yjs/${t.keypair.verifyexportmultihashsha256_58()}`),[e,e]}async p_newdatabase(t){t.hasOwnProperty("keypair")&&(t=t.keypair.signingexport());let e=`yjs:/yjs/${encodeURIComponent(t)}`;return{publicurl:e,privateurl:e}}async p_newtable(t,e){if(!t)throw new a.CodingError("p_newtable currently requires a pubkey");let r=await this.p_newdatabase(t);return{privateurl:`${r.privateurl}/${e}`,publicurl:`${r.publicurl}/${e}`}}async p_set(t,e,r){let n=await this.p_connection(t);"string"==typeof e?n.share.map.set(e,i.stringify(r)):Object.keys(e).map(t=>n.share.map.set(t,e[t]))}_p_get(t,e){if(Array.isArray(e))return e.reduce(function(e,r){let n=t.share.map.get(r);return e[r]="string"==typeof n?JSON.parse(n):n,e},{});{let r=t.share.map.get(e);return"string"==typeof r?JSON.parse(r):r}}async p_get(t,e){return this._p_get(await this.p_connection(t),e)}async p_delete(t,e){let r=await this.p_connection(t);"string"==typeof e?r.share.map.delete(e):e.map(t=>r.share.map.delete(t))}async p_keys(t){let e=await this.p_connection(t);return e.share.map.keys()}async p_getall(t){let e=await this.p_connection(t),r=e.share.map.keys();return this._p_get(e,r)}async p_rawfetch(t){return{table:"keyvaluetable",_map:await this.p_getall(t)}}async monitor(t,e,{current:r=!1}={}){t="string"==typeof t?t:t.href;let n=this.yarrays[t];if(!n)throw new a.CodingError("Should always exist before calling monitor - async call p__yarray(url) to create");r&&n.share.map.keys().forEach(t=>{let r=n.share.map.get[t];e({type:"set",key:t,value:"string"==typeof r?JSON.parse(r):r})}),n.share.map.observe(r=>{if(["add","update"].includes(r.type)&&(s("YJS monitor: %o %s %s %o",t,r.type,r.name,r.value),"update"!==r.type||r.oldValue!==r.value)){let t={type:{add:"set",update:"set",delete:"delete"}[r.type],value:JSON.parse(r.value),key:r.name};e(t)}})}static async p_test(t={}){console.log("TransportHTTP.test");try{let e=await this.p_setup(t);console.log("HTTP connected");let r=await e.p_info();console.log("TransportHTTP info=",r),r=await e.p_status(),console.assert(r===u.STATUS_CONNECTED),await e.p_test_kvt("NACL%20VERIFY")}catch(t){throw console.log("Exception thrown in TransportHTTP.test:",t.message),t}}}c._transportclasses.YJS=f,f.requires=["yjs","y-array","y-memory","y-text","y-map","y-ipfs-connector","y-indexeddb"],f.scripts=["yjs/dist/y.js","y-array/dist/y-array.js","y-memory/dist/y-memory.js","y-text/dist/y-text.js","y-map/dist/y-map.js","y-ipfs-connector/dist/y-ipfs-connector","y-indexeddb/dist/y-indexeddb"]},function(t,e,r){(function(n){const s=r(35),i=r(1),o=r(108),a=r(0)("dweb-transports:webtorrent"),u=r(2),c=r(6),l=r(4);let h={};class f extends c{constructor(t){super(t),this.webtorrent=void 0,this.options=t,this.name="WEBTORRENT",this.supportURLs=["magnet"],this.supportFunctions=["fetch","createReadStream","seed"],this.supportFeatures=["noCache"],this.status=c.STATUS_LOADED}loadIntoNode(){super.loadIntoNode();try{const t="wrtc";this.wrtc=r(16)(t)}catch(t){a("wrtc requested but not present")}}p_webtorrentstart(){let t=this;return new Promise((t,e)=>{this.webtorrent=new WebTorrent(this.options),this.webtorrent.once("ready",()=>{a("ready"),t()}),this.webtorrent.once("error",t=>e(t)),this.webtorrent.on("warning",t=>{console.warn("WebTorrent Torrent WARNING: "+t.message)})})}static setup0(t){let e=c.mergeoptions(h,t.webtorrent);"wrtc"===e.tracker&&(this.wrtc?e.tracker=this.wrtc:delete e.tracker),a("setup0: options=%o",e);let r=new f(e);return l.addtransport(r),r}async p_setup1(t){try{this.status=c.STATUS_STARTING,t&&t(this),await this.p_webtorrentstart(),await this.p_status()}catch(t){console.error(this.name,"failed to connect",t.message),this.status=c.STATUS_FAILED}return t&&t(this),this}stop(t,e){this.webtorrent.destroy(r=>{this.status=c.STATUS_FAILED,t&&t(this),r?a("Webtorrent error during stopping %o",r):a("Webtorrent stopped"),e(r,this)})}async p_status(){return this.webtorrent&&this.webtorrent.ready?this.status=c.STATUS_CONNECTED:this.webtorrent?this.status=c.STATUS_STARTING:this.status=c.STATUS_FAILED,super.p_status()}webtorrentparseurl(t){if(!t)throw new u.CodingError("TransportWEBTORRENT.p_rawfetch: requires url");const e="string"==typeof t?t:t.href,r=e.indexOf("/");if(-1===r)throw new u.CodingError("TransportWEBTORRENT.p_rawfetch: invalid url - missing path component. Should look like magnet:xyzabc/path/to/file");const n=e.slice(0,r),s=e.slice(r+1);return{torrentId:n,path:s}}async p_webtorrentadd(t,e){return new Promise((r,n)=>{let s=this.webtorrent.get(t);s||(s=this.webtorrent.add(t,e),s.once("error",t=>{n(new u.TransportError("Torrent encountered a fatal error "+t.message))}),s.on("warning",t=>{console.warn("WebTorrent Torrent WARNING: "+t.message+" ("+s.name+")")})),s.ready?r(s):s.once("ready",()=>{r(s)})})}webtorrentfindfile(t,e){const r=t.name+"/"+e,n=t.files.find(t=>t.path===r);if(!n)throw new u.TransportError("Requested file ("+e+") not found within torrent ");return n}p_rawfetch(t){return new Promise((e,r)=>{const{torrentId:n,path:s}=this.webtorrentparseurl(t);this.p_webtorrentadd(n).then(t=>{t.deselect(0,t.pieces.length-1,!1);const n=this.webtorrentfindfile(t,s);n.getBuffer((n,s)=>{if(n)return r(new u.TransportError("Torrent encountered a fatal error "+n.message+" ("+t.name+")"));e(s)})}).catch(t=>r(t))})}seed({fileRelativePath:t,directoryPath:e,torrentRelativePath:r},n){if(r){const s=o.join(e,r);this.p_addTorrentFromTorrentFile(s,e).then(r=>{a("Added %s/%s to webtorrent",e,t),n(null)}).catch(r=>{r.message.includes("Cannot add duplicate torrent")?n(null):(a("addWebTorrent failed %s/%s",e,t),n(r))})}else n(null)}async _p_fileTorrentFromUrl(t){try{const{torrentId:e,path:r}=this.webtorrentparseurl(t),n=await this.p_webtorrentadd(e);n.deselect(0,n.pieces.length-1,!1);const s=this.webtorrentfindfile(n,r);return"undefined"!=typeof window&&(window.WEBTORRENT_TORRENT=n,window.WEBTORRENT_FILE=s,n.once("close",()=>{window.WEBTORRENT_TORRENT=null,window.WEBTORRENT_FILE=null})),s}catch(t){throw t}}async p_addTorrentFromTorrentFile(t,e){try{const r={path:e},n=this.webtorrent.get(t);if(n)n.rescanFiles();else{const e=await this.p_webtorrentadd(t,r);e.deselect(0,e.pieces.length-1,!1)}}catch(t){throw t}}async p_f_createReadStream(t,{wanturl:e=!1}={}){try{let r=await this._p_fileTorrentFromUrl(t),n=this;return e?t:function(t){return n.createReadStream(r,t)}}catch(t){throw t}}createReadStream(t,e){let r;a("reading from stream %s %o",t.name,e);try{r=new s.PassThrough;const n=t.createReadStream(e);return n.pipe(r),r}catch(t){a("createReadStream error %s",t),"function"==typeof r.destroy?r.destroy(t):r.emit("error",t)}}async p_createReadableStream(t,e){let r=await this._p_fileTorrentFromUrl(t);return new ReadableStream({start(n){a("start %s %o",t,e);const s=r.createReadStream(e);s.on("data",t=>{n.enqueue(t)}),s.on("end",()=>{n.close()})},cancel(r){throw new u.TransportError(`cancelled ${t}, ${e} ${r}`)}})}static async p_test(t){try{let r=await this.p_setup(t);console.log(r.name,"p_test setup",t,"complete");let s=await r.p_status();console.assert(s===c.STATUS_CONNECTED);let i="magnet:?xt=urn:btih:dd8255ecdc7ca55fb0bbf81323d87062db1f6d1c&dn=Big+Buck+Bunny&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fbig-buck-bunny.torrent/Big Buck Bunny.en.srt",o=await r.p_rawfetch(i);o=o.toString(),e(o);const a=await r.createReadStream(i),u=[];function e(t){let e="00:00:02,000 --\x3e 00:00:05,000";console.assert(-1!==t.indexOf(e),"Should fetch 'Big Buck Bunny.en.srt' from the torrent"),console.assert(t.length,129,"'Big Buck Bunny.en.srt' was "+t.length)}a.on("data",t=>{u.push(t)}),a.on("end",()=>{const t=n.concat(u).toString();e(t)})}catch(t){throw console.log("Exception thrown in",r.name,"p_test():",t.message),t}}}l._transportclasses.WEBTORRENT=f,f.scripts=["webtorrent@latest/webtorrent.min.js"],f.requires=["webtorrent"],e=t.exports=f}).call(this,r(7).Buffer)},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t){"string"!=typeof t&&(t+="");var e=0,r=-1,n=!0,s;for(s=t.length-1;s>=0;--s)if(47===t.charCodeAt(s)){if(!n){e=s+1;break}}else-1===r&&(n=!1,r=s+1);return-1===r?"":t.slice(e,r)}function s(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,n="/"===o.charAt(0))}return e=r(s(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),o="/"===i(t,-1);return t=r(s(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&o&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var s=n(t.split("/")),i=n(r.split("/")),o=Math.min(s.length,i.length),a=o,u=0;u<o;u++)if(s[u]!==i[u]){a=u;break}for(var c=[],u=a;u<s.length;u++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,s=!0,i=t.length-1;i>=1;--i)if(e=t.charCodeAt(i),47===e){if(!s){n=i;break}}else s=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=n(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,s=!0,i=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===n&&(s=!1,n=o+1),46===a?-1===e?e=o:1!==i&&(i=1):-1!==e&&(i=-1);else if(!s){r=o+1;break}}return-1===e||-1===n||0===i||1===i&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(3))},function(t,e,r){const n=r(1),s=r(12),i=r(0)("dweb-transports:wolk"),o=r(2),a=r(6),u=r(4);let c={wolk_addr:"https://cloud.wolk.com"};class l extends a{constructor(t){super(t),this.options=t,this.wolk=void 0,this.name="WOLK",this.supportURLs=["wolk"],this.supportFunctions=["fetch","connection","get","set"],this.supportFeatures=[],this.status=a.STATUS_LOADED}connection(t){i("connection call");var e=new WOLK;return e}loadIntoNode(){var t=super.loadIntoNode().FS}static setup0(t){let e=a.mergeoptions(c,t.wolk);i("setup options=%o",e);let r=new l(e);return r.wolk=new WOLK,r.wolk.setProvider(r.options.wolk_addr),u.addtransport(r),r}async p_setup1(t){await this.wolk.init().then(async()=>{if(void 0==this.wolk.ecdsaKey||null==this.wolk.ecdsaKey){var t="user"+Math.floor(1e3*Math.random()+1);return i("createAccount because ecdsaKey null"),await this.wolk.createAccount(t).then(e=>{i("Account Created: ["+t+"] hash: "+e+" KEY: "+this.wolk.ecdsaKey)}).catch(t=>{throw new Error("Error Creating Account: "+t)})}}).catch(t=>{throw new Error("Error Initializing Wolk: "+t)});try{this.status=a.STATUS_STARTING,t&&t(this),await this.p_status()}catch(t){this.status=a.STATUS_FAILED}return t&&t(this),this}async p_status(){return this.wolk.getLatestBlockNumber().then(t=>(t>=0?(i("STATUS: connected? [1] = BN: %s",t),this.status=a.STATUS_CONNECTED):(i("STATUS: connected? [0] = BN: %s",t),this.status=a.STATUS_FAILED),this.status)).catch(t=>{console.error("Error getting bn: "+t)})}async p_rawstore(t){console.assert(t,"TransportWOLK.p_rawstore: requires chunkdata")}parseWolkUrl(t){var t=n.parse(t);if("wolk:"!=t.protocol)throw new o.TransportError("WOLK Error encountered retrieving val: url ("+t.href+") is not a valid WOLK url | protocol = "+t.protocol);let e=t.host;var r=t.path.split("/");let s=r[1],i=t.path.substring(s.length+2);var a="key";"wolk"==e&&"chunk"==s&&(a="chunk");let u=t.query;return{owner:e,bucket:s,path:i,urltype:a,query:u}}async p_rawfetch(t){var e=this.parseWolkUrl(t),r="";if("key"==e.urltype)return i("Checking Wolk NoSQL for: %s",t),this.wolk.getKey(e.owner,e.bucket,e.path,"latest").then(function(t){return t}).catch(t=>{throw new Error("ERROR: p_rawfetch - "+t)})}async p_newdatabase(t){}async p_newtable(t,e){}async p_set(t,e,r){var n=this.parseWolkUrl(t);if("string"==typeof e)return this.wolk.setKey(n.owner,n.bucket,e,s.stringify(r)).then(t=>t).catch(t=>{throw new Error("TransportWOLK - Error setting key value pair: "+t)});console.assert(!Array.isArray(e),"TransportWOLK - shouldnt be passsing an array as the keyvalues")}async p_get(t,e){var r=this.parseWolkUrl(t);if(i("Getting url: %s",s.stringify(r)),Array.isArray(e))throw new o.ToBeImplementedError("p_get(url, [keys]) isn't supported - because of ambiguity better to explicitly loop on set of keys");return this.wolk.getKey(r.owner,r.bucket,e,"latest").then(t=>t).catch(t=>{throw new o.TransportError("Error encountered getting keyvalues: "+t)})}async p_delete(t,e){var r=this.parseWolkUrl(t);if("string"==typeof e)return this.wolk.deleteKey(r.owner,r.bucket,e).then(t=>t).catch(t=>{throw new o.TransportError("Error deleting key(s): "+t)});e.map(t=>{this.wolk.deleteKey(r.owner,r.bucket,t)})}async p_keys(t){var e=this.parseWolkUrl(t);return this.listCollection(e.owner,e.bucket,{})}async p_getall(t){}}u._transportclasses.WOLK=l,l.scripts=["https://raw.githubusercontent.com/wolkdb/wolkjs/dev/lib/wolk-browserify.js"],l.requires="wolkjs",e=t.exports=l},function(t,e,r){(function(n){const s=r(1);n.env.GUN_ENV="false";const i=r(0)("dweb-transports:gun"),o=r(12),a=r(2),u=r(6),c=r(4),l=r(13);let h={peers:["https://dweb.me:4246/gun"],localStorage:!1};class f extends u{constructor(t){super(t),this.options=t,this.gun=void 0,this.name="GUN",this.supportURLs=["gun"],this.supportFunctions=["fetch","connection","get","set","getall","keys","newdatabase","newtable","monitor","add","list","listmonitor","newlisturls"],this.supportFeatures=[],this.status=u.STATUS_LOADED}connection(t){t=s.parse(t);let e=t.pathname.split("/");return e.shift(),e.shift(),i("path=",e),this.gun.path(e)}static setup0(t){let e=u.mergeoptions(h,t.gun);i("options %o",e);let r=new f(e);return r.gun=new Gun(r.options),c.addtransport(r),r}async p_setup1(t){try{this.status=u.STATUS_STARTING,t&&t(this),await this.p_status()}catch(t){console.error(this.name,"failed to start",t),this.status=u.STATUS_FAILED}return t&&t(this),this}async p_status(){return this.status=u.STATUS_CONNECTED,this.status}async p_rawfetch(t){t=s.parse(t);let e=this.connection(t),r=await this._p_once(e);if(!r)throw new a.TransportError("GUN unable to retrieve: "+t.href);let n="string"==typeof r?JSON.parse(r):r;if(n.metadata&&n.metadata.thumbnaillinks&&n.metadata.thumbnaillinks.find(t=>t.includes("ipfs/zb2")))throw new a.TransportError("GUN retrieving legacy data at: "+t.href);return n}async p_rawlist(t){try{let e=this.connection(t),r=await this._p_once(e),n=r?Object.keys(r).filter(t=>"_"!==t).sort().map(t=>r[t]):[];return i("p_rawlist found",...l.consolearr(n)),n}catch(t){throw t}}listmonitor(t,e,{current:r=!1}={}){let n=this.connection(t);r?n.map().on((t,r)=>e("set",r,JSON.parse(t))):n.once(t=>{this.monitored=t?Object.keys(t):[],n.map().on((t,r)=>{this.monitored.includes(r)||"_"===r||(this.monitored.push(r),e(JSON.parse(t)))})})}async p_rawadd(t,e){console.assert(t&&e.urls.length&&e.signature&&e.signedby.length,"TransportGUN.p_rawadd args",t,e),this.connection(t).set(o.stringify(e.preflight(Object.assign({},e))))}async p_newlisturls(t){let e=await this._p_newgun(t);return[e,e]}async _p_newgun(t){return t.hasOwnProperty("keypair")&&(t=t.keypair.signingexport()),`gun:/gun/${encodeURIComponent(t)}`}async p_newdatabase(t){let e=await this._p_newgun(t);return{publicurl:e,privateurl:e}}async p_newtable(t,e){if(!t)throw new a.CodingError("p_newtable currently requires a pubkey");let r=await this.p_newdatabase(t);return{privateurl:`${r.privateurl}/${e}`,publicurl:`${r.publicurl}/${e}`}}async p_set(t,e,r){let n=this.connection(t);"string"==typeof e?n.path(e).put(o.stringify(r)):(console.assert(!Array.isArray(e),"TransportGUN - shouldnt be passsing an array as the keyvalues"),n.put(Object.keys(e).reduce(function(t,r){return t[r]=o.stringify(e[r]),t},{})))}async p_get(t,e){let r=this.connection(t);if(Array.isArray(e))throw new a.ToBeImplementedError("p_get(url, [keys]) isn't supported - because of ambiguity better to explicitly loop on set of keys or use getall and filter");{let t=await this._p_once(r.get(e));return"string"==typeof t?JSON.parse(t):t}}async p_delete(t,e){let r=this.connection(t);"string"==typeof e?r.path(e).put(null):e.map(t=>r.path(t).put(null))}_p_once(t){return new Promise(e=>t.once(e,{wait:2e3}))}async p_keys(t){let e=await this._p_once(this.connection(t));return Object.keys(e).filter(t=>"_"!==t&&null!==e[t])}async p_getall(t){let e=await this._p_once(this.connection(t));return Object.keys(e).filter(t=>"_"!==t&&null!==e[t]).reduce(function(t,r){return t[r]=JSON.parse(e[r]),t},{})}async monitor(t,e,{current:r=!1}={}){let n=this.connection(t);r?n.map().on((t,r)=>e("set",r,JSON.parse(t))):n.once(t=>{this.monitored=Object.assign({},t),n.map().on((t,r)=>{t!==this.monitored[r]&&"_"!==r&&(this.monitored[r]=t,e("set",r,JSON.parse(t)))})})}static async p_test(){i("p_test");try{let t=this.setup0({});await t.p_setup1(),await t.p_setup2(),t.p_test_kvt("gun:/gun/NACL")}catch(t){throw console.warn("Exception thrown in TransportGUN.test:",t.message),t}}static async demo_bugs(){let t=new Gun;t.get("foo").get("bar").put("baz"),console.log("Expect {bar: 'baz'} but get {_:..., bar: 'baz'}"),t.get("foo").once(t=>console.log(t)),t.get("zip").get("bar").set("alice"),console.log("Expect {12345: 'alice'} but get {_:..., 12345: 'alice'}"),t.get("foo").once(t=>console.log(t))}}c._transportclasses.GUN=f,f.requires=f.scripts=["gun/gun.js","gun/lib/path.js","gun/lib/radix.js","gun/lib/radisk.js","gun/lib/store.js","gun/lib/rindexed.js"],e=t.exports=f}).call(this,r(3))},function(t,e,r){const n=r(6),s=r(4),i=r(14),o=r(1),a=r(0)("dweb-transports:hash"),u=r(12);defaultHashOptions={urlbase:"https://dweb.me"},servercommands={rawfetch:"contenthash",rawstore:"contenturl/rawstore",rawadd:"void/rawadd",rawlist:"metadata/rawlist",get:"get/table",set:"set/table",delete:"delete/table",keys:"keys/table",getall:"getall/table"};class c extends n{constructor(t){super(t),this.options=t,this.urlbase=t.urlbase,this.supportURLs=["contenthash"],this.supportFunctions=["fetch","store","add","list","reverse","newlisturls","get","set","keys","getall","delete","newtable","newdatabase"],this.supportFeatures=["noCache"],"undefined"==typeof window&&this.supportFunctions.push("createReadStream"),this.supportFeatures=["fetch.range","noCache"],this.name="HASH",this.status=n.STATUS_LOADED}static setup0(t){let e=n.mergeoptions(defaultHashOptions,t.hash);try{let t=new c(e);return s.addtransport(t),t}catch(t){throw a("ERROR: HASH unable to setup0",t.message),t}}p_setup2(t){return this.http=s.http(),new Promise((e,r)=>{this.status=n.STATUS_STARTING,t&&t(this),this.updateStatus((r,n)=>{t&&t(this),this.startHeartbeat(this.options.heartbeat),e(this)})})}async p_status(t){if(!t)return new Promise((t,e)=>{try{this.updateStatus((r,n)=>{r?e(r):t(n)})}catch(t){e(t)}});try{this.updateStatus(t)}catch(e){t(e)}}updateStatus(t){this.updateInfo((e,r)=>{e?(a("Error status call to info failed %s",e.message),this.status=n.STATUS_FAILED,t(null,this.status)):(this.info=r,this.status=n.STATUS_CONNECTED,t(null,this.status))})}startHeartbeat({delay:t,statusCB:e}){t&&(a("%s Starting Heartbeat",this.name),this.heartbeatTimer=setInterval(()=>{this.updateStatus((t,r)=>{e&&e(this)},(t,e)=>{})},t))}stopHeartbeat(){this.heartbeatTimer&&(a("stopping heartbeat"),clearInterval(this.heartbeatTimer))}stop(t,e){this.stopHeartbeat(),this.status=n.STATUS_FAILED,t&&t(this),e(null,this)}_cmdurl(t){return`${this.urlbase}/${t}`}_url(t,e,r){if(!t)throw new errors.CodingError(`${e}: requires url`);return"string"!=typeof t&&(t=t.href),t=t.replace("contenthash:/contenthash",this._cmdurl(e)),t=t.replace("getall/table",e),t+=r?"?"+r:"",t}async p_rawfetch(t,e={}){if(("string"==typeof t?t:t.href).includes("/getall/table"))throw new Error("Probably dont want to be calling p_rawfetch on a KeyValueTable, especially since dont know if its keyvaluetable or subclass");return await this.http.p_rawfetch(this._url(t,servercommands.rawfetch),e)}p_rawlist(t){if(!t)throw new errors.CodingError("TransportHASH.p_rawlist: requires url");return this.http.p_rawfetch(this._url(t,servercommands.rawlist))}rawreverse(){throw new errors.ToBeImplementedError("Undefined function TransportHASH.rawreverse")}async p_rawstore(t){console.assert(t,"TransportHASH.p_rawstore: requires data");const e=await i.p_POST(this._cmdurl(servercommands.rawstore),{data:t,contenttype:"application/octet-stream"});let r=o.parse(e),n=r.pathname.split("/");return`contenthash:/contenthash/${n.slice(-1)}`}p_rawadd(t,e){if(!t||!e)throw new errors.CodingError("TransportHASH.p_rawadd: invalid parms",t,e);const r=u.stringify(e.preflight(Object.assign({},e)))+"\n";return i.p_POST(this._url(t,servercommands.rawadd),{data:r,contenttype:"application/json"})}p_newlisturls(t){let e=t._publicurls.map(t=>o.parse(t)).find(t=>"https:"===t.protocol&&["gateway.dweb.me","dweb.me"].includes(t.host)&&(t.pathname.includes("/content/rawfetch")||t.pathname.includes("/contenthash/"))||"contenthash:"===t.protocol&&"contenthash"===t.pathname.split("/")[1]);return e||(e=`contenthash:/contenthash/${t.keypair.verifyexportmultihashsha256_58()}`),[e,e]}async p_f_createReadStream(t,{wanturl:e=!1}={}){return this.http.p_f_createReadStream(this._url(t,servercommands.rawfetch),{wanturl:e})}createReadStream(t,e){return this.http.createReadStream(this._url(t,servercommands.rawfetch),e)}async p_createReadStream(t,e){return this.http.p_createReadStream(this._url(t,servercommands.rawfetch),e)}async p_newdatabase(t){t.hasOwnProperty("keypair")&&(t=t.keypair.signingexport());let e=`${this.urlbase}/getall/table/${encodeURIComponent(t)}`;return{publicurl:e,privateurl:e}}async p_newtable(t,e){if(!t)throw new errors.CodingError("p_newtable currently requires a pubkey");let r=await this.p_newdatabase(t);return{privateurl:`${r.privateurl}/${e}`,publicurl:`${r.publicurl}/${e}`}}async p_set(t,e,r){if(!t||!e)throw new errors.CodingError("TransportHASH.p_set: invalid parms",t,keyvalyes);if("string"==typeof e){let n=u.stringify([{key:e,value:r}]);await i.p_POST(this._url(t,servercommands.set),{data:n,contenttype:"application/json"})}else{let r=u.stringify(Object.keys(e).map(t=>({key:t,value:e[t]})));await i.p_POST(this._url(t,servercommands.set),{data:r,contenttype:"application/json"})}}_keyparm(t){return`key=${encodeURIComponent(t)}`}async p_get(t,e){if(!t&&e)throw new errors.CodingError("TransportHASH.p_get: requires url and at least one key");let r=Array.isArray(e)?e.map(t=>this._keyparm(t)).join("&"):this._keyparm(e);const n=await i.p_GET(this._url(t,servercommands.get,r));return Array.isArray(e)?n:n[e]}async p_delete(t,e){if(!t&&e)throw new errors.CodingError("TransportHASH.p_get: requires url and at least one key");let r=e.map(t=>this._keyparm(t)).join("&");await i.p_GET(this._url(t,servercommands.delete,r))}async p_keys(t){if(!t&&keys)throw new errors.CodingError("TransportHASH.p_get: requires url and at least one key");return await i.p_GET(this._url(t,servercommands.keys))}async p_getall(t){if(!t&&keys)throw new errors.CodingError("TransportHASH.p_get: requires url and at least one key");return await i.p_GET(this._url(t,servercommands.getall))}async p_info(){return new Promise((t,e)=>{try{this.updateInfo((r,n)=>{r?e(r):t(n)})}catch(t){e(t)}})}updateInfo(t){i.p_GET(`${this.urlbase}/info`,{retries:1},t)}static async p_test(t={}){console.log("TransportHASH.test");try{let e=await this.p_setup(t);console.log("HASH connected");let r=await e.p_info();console.log("TransportHASH info=",r),r=await e.p_status(),console.assert(r===n.STATUS_CONNECTED),await e.p_test_kvt("NACL%20VERIFY")}catch(t){throw console.log("Exception thrown in TransportHASH.test:",t.message),t}}static async test(){return this}}s._transportclasses.HASH=c,c.requires=c.scripts=[],e=t.exports=c},function(t,e,r){const n=r(1),s=r(6),i=r(4),o=r(2),a=r(12),u=r(0)("dweb-transports:fluence"),c={nodeUrl:"https://ia-redis.fluence.one",nodePort:443,appId:"4"};class l extends s{constructor(t){super(t),this.options=t,this.session=void 0,this.name="FLUENCE",this.supportURLs=["fluence"],this.supportFunctions=["fetch","list","add","newlisturls","newdatabase","newtable","get","set","getall","keys"],this.supportFeatures=[],this.status=s.STATUS_LOADED}static setup0(t){const e=s.mergeoptions(c,t.fluence);console.assert(e.nodeUrl,"Fluence Node url should be specified"),console.assert(e.nodePort,"Fluence Node port should be specified"),console.assert(e.appId,"Fluence AppId should be specified");let r=new l(e);return i.addtransport(r),r}async p_setup1(t){try{this.status=s.STATUS_STARTING,u("connecting..."),t&&t(this);const e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);this.session=fluence.directConnect(this.options.nodeUrl,this.options.nodePort,this.options.appId,e),u("connected."),this.status=s.STATUS_CONNECTED}catch(t){console.error(this.name,"failed to start",t),this.status=s.STATUS_FAILED}return t&&t(this),this}async p_status(){return null!==this.session&&void 0!==this.session&&(this.status=s.STATUS_CONNECTED),super.p_status()}parseUrl(t){const e=n.parse(t);if("fluence:"!==e.protocol)throw new o.TransportError(`TransportFLUENCE Error encountered retrieving val: url (${e.href}) is not a valid FLUENCE url | protocol = ${e.protocol}`);return u("retrieve url",e.href),e}newKey(t){return t.hasOwnProperty("keypair")&&(t=t.keypair.signingexport()),`fluence:/fluence/${encodeURIComponent(t)}`}parseRedisResponse(t){if(!t.startsWith("$-1"))return e(t).data;function e(t){const[,r,n]=/^([\+\-\:\$\*]{1})([0-9]+)/.exec(t),s=Number(n);switch(r){case"+":{const e=1,[,r]=/([^\n\r]+)/.exec(t.substring(e));return{data:r,offset:e+r.length+2}}case":":{const e=1,[,r]=/([0-9]+)/.exec(t.substring(e));return{data:Number(r),offset:e+r.length+2}}case"$":{const e=1+String(s).length+2;return{data:t.substring(e,e+s),offset:e+s+2}}case"*":{let r=1+String(s).length+2;const n=[];for(let i=0;i<s;i++){const s=e(t.substring(r));n.push(s.data),r+=s.offset}return{data:n,offset:null}}default:throw new o.TransportError(`TransportFLUENCE Error unsupprted Redis response type: ${r}, response: ${t}`)}}}async p_rawfetch(t){const e=this.parseUrl(t),r=e.path,n=await this.session.request(`GET ${r}`),s=this.parseRedisResponse(n.asString());if(!s)throw new o.TransportError(`TransportFLUENCE unable to retrieve: ${t.href}`);return"string"==typeof s?JSON.parse(s):s}async p_rawlist(t){const e=this.parseUrl(t),r=e.path,n=await this.session.request(`LRANGE ${r} 0 -1`),s=this.parseRedisResponse(n.asString());if(!s)throw new o.TransportError(`TransportFLUENCE unable to retrieve list: ${t.href}`);return s.map(t=>"string"==typeof t?JSON.parse(t):t)}async p_rawadd(t,e){const r=this.parseUrl(t),n=r.path,s=a.stringify(e.preflight(Object.assign({},e)));await this.session.request(`RPUSH ${n} ${s}`)}async p_newlisturls(t){const e=this.newKey(t);return[e,e]}async p_newdatabase(t){let e=await this.newKey(t);return{publicurl:e,privateurl:e}}async p_newtable(t,e){if(!t)throw new o.CodingError("p_newtable currently requires a pubkey");const{publicurl:r,privateurl:n}=await this.p_newdatabase(t);return{privateurl:`${n}/${e}`,publicurl:`${r}/${e}`}}async p_set(t,e,r){"string"==typeof e?await this.session.request(`HSET ${t} ${e} ${a.stringify(r)}`):(console.assert(!Array.isArray(e),"TransportFLUENCE - shouldnt pass an array as the keyvalues"),await Promise.all(Object.keys(e).map(r=>this.session.request(`HSET ${t} ${r} ${a.stringify(e[r])}`))))}async p_get(t,e){if(Array.isArray(e)){const r=await this.session.request(`HMGET ${t} ${e.join(" ")}`),n=this.parseRedisResponse(r.asString());return e.reduce((t,e,r)=>{const s=n[r];return t[e]="string"==typeof s?JSON.parse(s):s,t},{})}{const r=await this.session.request(`HGET ${t} ${e}`);let n=this.parseRedisResponse(r.asString());return"string"==typeof n?JSON.parse(n):n}}async p_keys(t){const e=await this.session.request(`HKEYS ${t}`);return this.parseRedisResponse(e.asString())}async p_getall(t){const e=await this.session.request(`HGETALL ${t}`),r=this.parseRedisResponse(e.asString());return r.reduce((t,e,r,n)=>{if(r%2!=0)return t;const s=n[r+1];return t[e]="string"==typeof s?JSON.parse(s):s,t},{})}async p_delete(t,e){"string"==typeof e?await this.session.request(`HDEL ${t} ${e}`):await this.session.request(`HDEL ${t} ${e.join(" ")}`)}}i._transportclasses.FLUENCE=l,l.scripts=["fluence@0.3.14-no-webj/bundle/bundle.js"],l.requires={fluence:"fluence"},e=t.exports=l}]);
//# sourceMappingURL=dweb-transports-bundle.js.map